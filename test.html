<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ZaraFix All Service</title>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f4f4f4;
}

/* Header */
header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 20px;
  background: white;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.logo {
  font-size: 2.5rem;
  font-weight: bold;
  background: linear-gradient(45deg, red, orange, yellow, green, blue, indigo, violet);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 3px 3px 6px rgba(0,0,0,0.4);
  transform: perspective(500px) rotateX(10deg);
}

nav {
  display: flex;
  gap: 15px;
}

nav a {
  text-decoration: none;
  color: #333;
  font-weight: bold;
}

#loginBtn, #logoutBtn {
  padding: 6px 12px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

#loginBtn { background: #28a745; color: white; }
#logoutBtn { background: #dc3545; color: white; }

/* Slider */
.slider {
  width: 100%;
  height: 400px;
  background: #eaeaea;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.slider img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border: none;
  box-shadow: none;
  transition: transform 0.5s ease;
}

/* Admin Controls */
.admin-controls {
  text-align: center;
  margin-top: 10px;
}

.admin-controls button {
  padding: 8px 14px;
  margin: 5px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.upload-btn { background: #28a745; color: white; }
.delete-btn { background: #dc3545; color: white; }
</style>
</head>

<body>

<header>
  <div style="display:flex; align-items:center; gap:20px;">
    <div class="logo">ZaraFix</div>
    <nav>
      <a href="#">Home</a>
      <a href="#">Services</a>
      <a href="#">Contact</a>
      <a href="#">About</a>
    </nav>
  </div>
  <div>
    <button id="loginBtn">Login with Google</button>
    <button id="logoutBtn" style="display:none;">Logout</button>
  </div>
</header>

<div class="slider" id="imageSlider"></div>

<div class="admin-controls" id="adminControls" style="display:none;">
  <button class="upload-btn" id="adminUploadBtn">Upload Image</button>
  <button class="delete-btn" id="adminDeleteBtn">Delete Current Image</button>
</div>

<script>
// Firebase config
const firebaseConfig = {
  apiKey: "AIzaSyD7ZqL-PVuFdd8rMVIyW7CgHQjPRGHD2h8",
  authDomain: "zara-fix-2e35a.firebaseapp.com",
  projectId: "zara-fix-2e35a",
  storageBucket: "zara-fix-2e35a.appspot.com",
  messagingSenderId: "636550144008",
  appId: "1:636550144008:web:a849496ad1d1557d7ab1bd"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const storage = firebase.storage();

const adminEmail = "zarasamajiksevasanstha@gmail.com";
let sliderImages = [];
let currentIndex = 0;

// Login
document.getElementById('loginBtn').onclick = () => {
  const provider = new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider).catch(console.error);
};

// Logout
document.getElementById('logoutBtn').onclick = () => auth.signOut();

// Auth state
auth.onAuthStateChanged(user => {
  if (user) {
    document.getElementById('loginBtn').style.display = "none";
    document.getElementById('logoutBtn').style.display = "inline-block";
    if (user.email === adminEmail) {
      document.getElementById('adminControls').style.display = "block";
    }
  } else {
    document.getElementById('loginBtn').style.display = "inline-block";
    document.getElementById('logoutBtn').style.display = "none";
    document.getElementById('adminControls').style.display = "none";
  }
});

// Upload
document.getElementById('adminUploadBtn').onclick = () => {
  let input = document.createElement('input');
  input.type = "file";
  input.accept = "image/*";
  input.onchange = async () => {
    const file = input.files[0];
    if (!file) return;
    const storageRef = storage.ref('slider/' + file.name);
    await storageRef.put(file);
    loadSliderImages();
  };
  input.click();
};

// Delete
document.getElementById('adminDeleteBtn').onclick = async () => {
  if (sliderImages.length === 0) return;
  const imgUrl = sliderImages[currentIndex];
  const filePath = decodeURIComponent(imgUrl.split("/o/")[1].split("?")[0]);
  await storage.ref(filePath).delete();
  loadSliderImages();
};

// Load images
async function loadSliderImages() {
  sliderImages = [];
  const sliderDiv = document.getElementById('imageSlider');
  sliderDiv.innerHTML = '';
  const list = await storage.ref('slider').listAll();
  for (let item of list.items) {
    const url = await item.getDownloadURL();
    sliderImages.push(url);
  }
  showImage();
}

function showImage() {
  if (sliderImages.length === 0) return;
  const sliderDiv = document.getElementById('imageSlider');
  sliderDiv.innerHTML = `<img src="${sliderImages[currentIndex]}">`;
}

setInterval(() => {
  if (sliderImages.length > 1) {
    currentIndex = (currentIndex + 1) % sliderImages.length;
    showImage();
  }
}, 3000);

loadSliderImages();
</script>
</body>
</html>
