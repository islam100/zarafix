<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Zara Fix - Home</title>
<style>
body, html {
  margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(to bottom, #87ceeb 0%, #e0f7ff 80%);
}
header {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 20px; background: rgba(255,255,255,0.9); box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
.logo { font-size: 2.5rem; font-weight: 900; color:#ef0400; text-shadow: 2px 2px #ffea00, 4px 4px #00f7ff; }
#googleLoginBtn { background:#4285F4;color:white;padding:8px 16px;border:none;border-radius:8px;cursor:pointer; }
nav { position: relative; }
nav select { padding:6px 12px; border-radius:6px; font-weight:700; cursor:pointer; }

/* Slider */
.slider-container { max-width: 600px; margin: 30px auto; position: relative; }
.slider-img { width: 100%; border-radius: 15px; }
.slider-controls { position: absolute; top:50%; width:100%; display:flex; justify-content:space-between; transform:translateY(-50%); }
.slider-controls button { background:rgba(0,0,0,0.5); color:white; border:none; padding:8px 12px; border-radius:5px; cursor:pointer; }

/* Admin Upload */
.admin-upload { display:none; text-align:center; margin:10px 0; }
.admin-upload input { margin-bottom:8px; }

/* Bottom buttons */
.bottom-buttons { display:flex; justify-content:center; gap:15px; margin:30px 0; }
.btn-3d { padding:12px 25px; font-size:16px; font-weight:700; border-radius:14px; border:none; color:white; cursor:pointer; min-width:120px; text-align:center; box-shadow:0 5px 0 #444,0 9px 15px rgba(0,0,0,0.25); transition:transform 0.15s ease; }
.btn-3d:hover { transform: translateY(3px); box-shadow:0 2px 0 #444,0 5px 8px rgba(0,0,0,0.15); }
.green { background: linear-gradient(to right, #4caf50, #2e7d32); }
.blue { background: linear-gradient(to right, #2196f3, #0d47a1); }
.red { background: linear-gradient(to right, #f44336, #b71c1c); }

/* Scrolling Text */
.scrolling-text { position: fixed; bottom: 0; width:100%; background: rgba(255 255 255 / 0.85); color:#222; font-weight:700; padding:8px 0; box-shadow:0 0 12px rgba(0,0,0,0.1); overflow:hidden; white-space:nowrap; }
.scrolling-text span { display:inline-block; padding-left:100%; animation: scroll-left 18s linear infinite; }
@keyframes scroll-left { 0%{transform:translateX(0);} 100%{transform:translateX(-100%);} }
</style>
</head>
<body>

<header>
  <div class="logo">Zara Fix</div>
  <div style="display:flex; align-items:center; gap:10px;">
    <button id="googleLoginBtn">Login</button>
    <nav>
      <select id="menuDropdown">
        <option value="#">Select Option</option>
        <option value="recharge.html">Recharge Request</option>
        <option value="requestbottun.html">Service Request</option>
        <option value="2poster.html">Service Provider</option>
        <option value="property-index.html">Real Estate</option>
        <option value="admin-dashboard.html">Admin Dashboard</option>
        <option value="#">Extra 1</option>
        <option value="#">Extra 2</option>
        <option value="#">Extra 3</option>
      </select>
    </nav>
  </div>
</header>

<div class="slider-container">
  <img id="sliderImage" class="slider-img" src="" alt="Slider Image">
  <div class="slider-controls">
    <button id="prevBtn">&#10094;</button>
    <button id="nextBtn">&#10095;</button>
  </div>

  <!-- Admin upload -->
  <div class="admin-upload" id="adminUpload">
    <input type="text" id="imageURL" placeholder="Enter Image URL" style="width:70%;">
    <br>
    <button id="uploadBtn">Upload Image</button>
    <button id="deleteBtn">Delete Current</button>
  </div>
</div>

<div class="bottom-buttons">
  <button class="btn-3d green">Button 1</button>
  <button class="btn-3d blue">Button 2</button>
  <button class="btn-3d red">Button 3</button>
</div>

<div class="scrolling-text"><span>यहाँ आपका स्क्रोलिंग संदेश आएगा • Zara Fix में आपका स्वागत है • नई अपडेट्स देखें • जल्दी ही नया फीचर आ रहा है •</span></div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyD7ZqL-PVuFdd8rMVIyW7CgHQjPRGHD2h8",
  authDomain: "zara-fix-2e35a.firebaseapp.com",
  projectId: "zara-fix-2e35a",
  storageBucket: "zara-fix-2e35a.appspot.com",
  messagingSenderId: "636550144008",
  appId: "1:636550144008:web:a849496ad1d1557d7ab1bd",
  databaseURL: "https://zara-fix-2e35a-default-rtdb.firebaseio.com"
};

firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();

const loginBtn = document.getElementById('googleLoginBtn');
const adminUpload = document.getElementById('adminUpload');
const imageURL = document.getElementById('imageURL');
const uploadBtn = document.getElementById('uploadBtn');
const deleteBtn = document.getElementById('deleteBtn');
const sliderImage = document.getElementById('sliderImage');

let sliderData = [];
let currentIndex = 0;
let currentUserId = null;

// Login
loginBtn.addEventListener('click', ()=>{
  if(auth.currentUser){
    auth.signOut();
  }else{
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider);
  }
});

// On auth state change
auth.onAuthStateChanged(user=>{
  if(user){
    loginBtn.textContent='Logout';
    currentUserId = user.uid;
    db.ref('admins/'+currentUserId).get().then(snapshot=>{
      if(snapshot.exists()){
        adminUpload.style.display='block';
      }
    });
  }else{
    loginBtn.textContent='Login';
    adminUpload.style.display='none';
    currentUserId = null;
  }
  loadSlider();
});

// Load slider from Firebase
function loadSlider(){
  db.ref('slider').once('value').then(snapshot=>{
    sliderData = [];
    snapshot.forEach(child=>{
      sliderData.push({key:child.key, url:child.val().url});
    });
    if(sliderData.length>0){
      currentIndex=0;
      sliderImage.src = sliderData[currentIndex].url;
    }else{
      sliderImage.src='';
    }
  });
}

// Slider controls
document.getElementById('prevBtn').addEventListener('click', ()=>{
  if(sliderData.length==0) return;
  currentIndex = (currentIndex-1+sliderData.length)%sliderData.length;
  sliderImage.src = sliderData[currentIndex].url;
});
document.getElementById('nextBtn').addEventListener('click', ()=>{
  if(sliderData.length==0) return;
  currentIndex = (currentIndex+1)%sliderData.length;
  sliderImage.src = sliderData[currentIndex].url;
});

// Upload image (admin only)
uploadBtn.addEventListener('click', ()=>{
  if(!currentUserId) return;
  const url = imageURL.value.trim();
  if(url=='') return alert('Enter image URL');
  const timestamp = Date.now();
  db.ref('slider').push({url:url,timestamp:timestamp}).then(()=>{
    imageURL.value='';
    loadSlider();
  });
});

// Delete current image
deleteBtn.addEventListener('click', ()=>{
  if(!currentUserId || sliderData.length==0) return;
  const key = sliderData[currentIndex].key;
  db.ref('slider/'+key).remove().then(()=>loadSlider());
});
</script>
</body>
</html>
