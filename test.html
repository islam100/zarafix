<!DOCTYPE html>
<html>
<head>
  <title>ðŸ’ª ZaraFix All-in-One Panel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial;
      background: linear-gradient(to bottom right, #e3f2fd, #ffffff);
      margin: 0;
      padding: 10px;
      text-align: center;
    }
    select, button {
      padding: 10px 15px;
      margin: 10px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      box-shadow: 2px 2px 6px #aaa;
      cursor: pointer;
    }
    .section {
      display: none;
      margin-top: 20px;
      padding: 15px;
      border-radius: 15px;
      background: #fff;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      margin-top: 0;
    }
  </style>
</head>
<body>

<h2>ðŸ’ª Welcome to ZaraFix</h2>
<p><button onclick="logout()">Logout</button></p>

<select id="panelSelect" onchange="switchPanel()">
  <option value="">-- Select Panel --</option>
  <option value="userForm">User: Post Request</option>
  <option value="userDashboard">User: My Requests</option>
  <option value="posterForm">Provider: Register</option>
  <option value="posterDashboard">Provider: Job Dashboard</option>
  <option value="adminPosters">Admin: All Posters</option>
  <option value="adminRequests">Admin: All Requests</option>
  <option value="adminRecharge">Admin: Recharge Approval</option>
</select>

<div id="userForm" class="section">
  <h2>ðŸ“… Post a Service Request</h2>
  <!-- Your user form code goes here -->
</div>

<div id="userDashboard" class="section">
  <h2>ðŸ”§ My Service Requests</h2>
  <!-- Your user dashboard code goes here -->
</div>

<div id="posterForm" class="section">
  <h2>ðŸšª Provider Registration</h2>
  <input type="text" placeholder="Name"><br>
  <input type="text" placeholder="Address"><br>
  <input type="text" placeholder="Shop Name"><br>
  <input type="text" placeholder="WhatsApp Number"><br>
  <select>
    <option>AC Mechanic</option>
    <option>Electrician</option>
    <option>Plumber</option>
  </select><br>
  <button>Submit</button>
</div>

<div id="posterDashboard" class="section">
  <h2>ðŸ“Š Provider Job Dashboard</h2>
  <!-- Job list and wallet info here -->
</div>

<div id="adminPosters" class="section">
  <h2>ðŸ‘¤ Admin: All Service Providers</h2>
  <!-- Admin poster view -->
</div>

<div id="adminRequests" class="section">
  <h2>ðŸ“„ Admin: All Service Requests</h2>
  <!-- Admin request view -->
</div>

<div id="adminRecharge" class="section">
  <h2>ðŸ’³ Admin: Recharge Approvals</h2>
  <!-- Recharge approval system -->
</div>

<script>
let userUID = null;
let isAdmin = false;

function switchPanel() {
  document.querySelectorAll('.section').forEach(div => div.style.display = 'none');
  const selected = document.getElementById('panelSelect').value;
  if (selected) {
    document.getElementById(selected).style.display = 'block';
  }
}

function logout() {
  firebase.auth().signOut().then(() => location.reload());
}

function checkLogin() {
  firebase.auth().onAuthStateChanged(user => {
    if (user) {
      userUID = user.uid;
      firebase.database().ref("admins/" + user.uid).once('value', snap => {
        isAdmin = snap.exists();
        if (!isAdmin) {
          document.querySelectorAll("option").forEach(opt => {
            if (opt.value.startsWith("admin")) opt.style.display = "none";
          });
        }
      });
    } else {
      window.location.href = "index.html";
    }
  });
}

checkLogin();
</script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyD7ZqL-PVuFdd8rMVIyW7CgHQjPRGHD2h8",
    authDomain: "zara-fix-2e35a.firebaseapp.com",
    projectId: "zara-fix-2e35a",
    storageBucket: "zara-fix-2e35a.appspot.com",
    messagingSenderId: "636550144008",
    appId: "1:636550144008:web:a849496ad1d1557d7ab1bd"
  };
  firebase.initializeApp(firebaseConfig);
</script>
</body>
</html>
