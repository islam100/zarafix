<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zara Fix - Home</title>
<style>
  body, html {
    margin:0; padding:0;
    font-family: Arial, sans-serif;
    background: #f0f0f0;
  }

  /* Header */
  header {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    padding: 10px 20px;
    background: #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  #googleLoginBtn {
    padding: 8px 15px;
    background: #4285F4;
    color:#fff;
    border:none;
    border-radius:6px;
    cursor:pointer;
  }

  /* Slider */
  #sliderContainer {
    width: 100%;
    max-width: 800px;
    margin: 20px auto;
    position: relative;
    overflow: hidden;
    border-radius: 15px;
    background: #ccc;
  }
  #sliderImages img {
    width: 100%;
    display: none;
  }
  #sliderImages img.active { display: block; }

  /* Admin controls */
  #adminControls {
    text-align: center;
    padding:10px;
    background:#eee;
  }
  #adminControls input[type=file] { margin-bottom:10px; }
  .deleteBtn {
    background:#f44336;
    color:#fff;
    border:none;
    padding:5px 10px;
    margin-left:5px;
    cursor:pointer;
    border-radius:4px;
  }

  /* Bottom buttons */
  .bottomBtns {
    display:flex;
    justify-content:center;
    gap:15px;
    margin:30px 0;
  }
  .bottomBtns button {
    padding:10px 20px;
    border:none;
    border-radius:8px;
    background:#2196F3;
    color:#fff;
    cursor:pointer;
  }
</style>
</head>
<body>

<header>
  <button id="googleLoginBtn">Google Login</button>
</header>

<div id="sliderContainer">
  <div id="sliderImages"></div>

  <div id="adminControls" style="display:none;">
    <input type="file" id="sliderFile">
    <button id="uploadBtn">Upload</button>
  </div>
</div>

<div class="bottomBtns">
  <button onclick="alert('About')">About</button>
  <button onclick="alert('Contact')">Contact</button>
  <button onclick="alert('Privacy Policy')">Privacy Policy</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyD7ZqL-PVuFdd8rMVIyW7CgHQjPRGHD2h8",
  authDomain: "zara-fix-2e35a.firebaseapp.com",
  projectId: "zara-fix-2e35a",
  storageBucket: "zara-fix-2e35a.appspot.com",
  messagingSenderId: "636550144008",
  appId: "1:636550144008:web:a849496ad1d1557d7ab1bd"
};
firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();
const storage = firebase.storage();

// Admin UID list
const adminUIDs = {
  "QT3LkEToHwaiORatoKfTx8QE45s2": true
};

// Login button
const loginBtn = document.getElementById('googleLoginBtn');
const adminControls = document.getElementById('adminControls');

loginBtn.addEventListener('click', ()=>{
  if(auth.currentUser){
    auth.signOut();
  } else {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider);
  }
});

auth.onAuthStateChanged(user=>{
  if(user){
    loginBtn.textContent = 'Logout';
    if(adminUIDs[user.uid]){
      adminControls.style.display = 'block';
    }
  } else {
    loginBtn.textContent = 'Google Login';
    adminControls.style.display = 'none';
  }
});

// Upload image
document.getElementById('uploadBtn').addEventListener('click', ()=>{
  const file = document.getElementById('sliderFile').files[0];
  if(!file){ alert('Select file!'); return; }
  const storageRef = storage.ref('slider/' + Date.now() + '_' + file.name);
  storageRef.put(file).then(snapshot=>{
    snapshot.ref.getDownloadURL().then(url=>{
      const key = db.ref('slider').push().key;
      db.ref('slider/' + key).set({url:url, timestamp:Date.now()});
      document.getElementById('sliderFile').value = '';
    });
  });
});

// Load slider
const sliderImagesDiv = document.getElementById('sliderImages');
function loadSlider(){
  db.ref('slider').on('value', snap=>{
    sliderImagesDiv.innerHTML = '';
    const data = snap.val();
    if(!data) return;
    Object.keys(data).forEach(key=>{
      const img = document.createElement('img');
      img.src = data[key].url;
      img.dataset.key = key;
      sliderImagesDiv.appendChild(img);

      // Admin delete button
      if(auth.currentUser && adminUIDs[auth.currentUser.uid]){
        const del = document.createElement('button');
        del.textContent = 'Delete';
        del.className = 'deleteBtn';
        del.onclick = ()=>{
          // Delete from storage and DB
          storage.refFromURL(data[key].url).delete().then(()=>{
            db.ref('slider/' + key).remove();
          });
        };
        sliderImagesDiv.appendChild(del);
      }
    });

    startSlider();
  });
}

// Auto slide
let currentIndex = 0;
let sliderInterval;
function startSlider(){
  const imgs = sliderImagesDiv.querySelectorAll('img');
  if(imgs.length==0) return;
  imgs.forEach(img=>img.classList.remove('active'));
  imgs[currentIndex].classList.add('active');
  clearInterval(sliderInterval);
  sliderInterval = setInterval(()=>{
    imgs.forEach(img=>img.classList.remove('active'));
    currentIndex = (currentIndex+1) % imgs.length;
    imgs[currentIndex].classList.add('active');
  },3000);
}

loadSlider();
</script>

</body>
</html>
