<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zara Fix - Home</title>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<style>
body, html { margin:0; padding:0; font-family:sans-serif; background: linear-gradient(to bottom, #87ceeb 0%, #e0f7ff 80%);}
header { display:flex; justify-content: space-between; align-items:center; padding:10px 15px; position:sticky; top:0; background:rgba(255,255,255,0.9); z-index:100; }
.logo { font-size:2rem; font-weight:bold; color:#ef0400; text-shadow:2px 2px #00f7ff; }
#loginBtn { padding:8px 16px; font-weight:600; border:none; border-radius:6px; background:#4285f4; color:white; cursor:pointer;}
.dropdown { position:relative; display:inline-block; }
.dropbtn { padding:8px 14px; background:#ff9800; border:none; border-radius:6px; cursor:pointer; font-weight:600; }
.dropdown-content { display:none; position:absolute; background:white; min-width:150px; box-shadow:0 4px 8px rgba(0,0,0,0.2); z-index:1; border-radius:6px; }
.dropdown-content a { display:block; padding:8px 12px; text-decoration:none; color:#333; }
.dropdown-content a:hover { background:#f0f0f0; }
.dropdown:hover .dropdown-content { display:block; }

.container { max-width:480px; margin:20px auto; text-align:center; }

.slider-box { position:relative; width:100%; max-width:450px; margin:20px auto; border-radius:10px; overflow:hidden; box-shadow:0 0 12px rgba(0,0,0,0.2); background:white; }
.slider-box img { width:100%; height:250px; object-fit:cover; display:block; }

.admin-controls { display:none; margin-top:10px; }
.admin-controls input[type="file"] { display:block; margin:10px auto; }
.admin-controls button { padding:6px 12px; margin:5px; border:none; border-radius:6px; cursor:pointer; }

.bottom-buttons { display:flex; justify-content:center; gap:10px; margin:20px 0; flex-wrap:wrap; }
.bottom-buttons button { padding:8px 14px; border:none; border-radius:6px; background:#4caf50; color:white; cursor:pointer; font-weight:600; min-width:100px; }

.scrolling-text { position:fixed; bottom:0; width:100%; background:rgba(255,255,255,0.9); padding:8px 0; font-weight:700; overflow:hidden; white-space:nowrap; }
.scrolling-text span { display:inline-block; padding-left:100%; animation:scroll-left 15s linear infinite; }
@keyframes scroll-left { 0%{transform:translateX(0);} 100%{transform:translateX(-100%);} }
</style>
</head>
<body>

<header>
  <div class="logo">Zara Fix</div>
  <div style="display:flex;align-items:center; gap:10px;">
    <div class="dropdown">
      <button class="dropbtn">Menu</button>
      <div class="dropdown-content" id="menuLinks">
        <!-- JS se links dalenge -->
      </div>
    </div>
    <button id="loginBtn">Google Login</button>
  </div>
</header>

<div class="container">
  <div class="slider-box">
    <img id="sliderImage" src="https://via.placeholder.com/450x250?text=Slider+Image" alt="Slider">
    <div class="admin-controls" id="adminControls">
      <input type="file" id="imageUpload" accept="image/*">
      <button id="uploadBtn">Upload</button>
      <button id="deleteBtn">Delete Current</button>
    </div>
  </div>
</div>

<div class="bottom-buttons">
  <button>Button 1</button>
  <button>Button 2</button>
  <button>Button 3</button>
</div>

<div class="scrolling-text">
  <span>यहाँ आपका स्क्रोलिंग संदेश आएगा • Zara Fix में आपका स्वागत है • नई अपडेट्स देखें • जल्दी ही नया फीचर आ रहा है •</span>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyD7ZqL-PVuFdd8rMVIyW7CgHQjPRGHD2h8",
  authDomain: "zara-fix-2e35a.firebaseapp.com",
  projectId: "zara-fix-2e35a",
  storageBucket: "zara-fix-2e35a.appspot.com",
  messagingSenderId: "636550144008",
  appId: "1:636550144008:web:a849496ad1d1557d7ab1bd"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const storage = firebase.storage();
const db = firebase.database();

const loginBtn = document.getElementById('loginBtn');
const adminControls = document.getElementById('adminControls');
const sliderImage = document.getElementById('sliderImage');
const uploadBtn = document.getElementById('uploadBtn');
const deleteBtn = document.getElementById('deleteBtn');
const imageUpload = document.getElementById('imageUpload');
const menuLinks = document.getElementById('menuLinks');

// 8 Menu links
const links = [
  {name:'Home', url:'#'},
  {name:'Recharge', url:'#'},
  {name:'Service', url:'#'},
  {name:'Providers', url:'#'},
  {name:'Real Estate', url:'#'},
  {name:'Admin', url:'#'},
  {name:'Extra1', url:'#'},
  {name:'Extra2', url:'#'}
];
links.forEach(l => {
  let a = document.createElement('a');
  a.href = l.url;
  a.textContent = l.name;
  menuLinks.appendChild(a);
});

// Admin Email
const adminEmail = "zarasamajiksevasanstha@gmail.com";
let currentUser = null;

// Login/Logout
loginBtn.addEventListener('click', () => {
  if(currentUser) { 
    auth.signOut();
  } else {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider)
      .then(result => { currentUser = result.user; })
      .catch(err => alert(err.message));
  }
});

auth.onAuthStateChanged(user => {
  currentUser = user;
  if(user){
    loginBtn.textContent = 'Logout';
    if(user.email === adminEmail){
      adminControls.style.display = 'block';
      loadSliderImage();
    }
  } else {
    loginBtn.textContent = 'Google Login';
    adminControls.style.display = 'none';
  }
});

// Slider Upload
function loadSliderImage(){
  db.ref('slider/current').once('value').then(snap=>{
    const url = snap.val();
    if(url) sliderImage.src = url;
  });
}

uploadBtn.addEventListener('click', ()=>{
  const file = imageUpload.files[0];
  if(!file) return alert('Please select image');
  const storageRef = storage.ref('slider/'+file.name);
  storageRef.put(file).then(()=> storageRef.getDownloadURL()
    .then(url => {
      sliderImage.src = url;
      db.ref('slider/current').set(url);
      alert('Uploaded successfully');
    })
  );
});

deleteBtn.addEventListener('click', ()=>{
  const url = sliderImage.src;
  if(confirm('Delete current slider image?')){
    storage.refFromURL(url).delete().then(()=>{
      sliderImage.src = 'https://via.placeholder.com/450x250?text=Slider+Image';
      db.ref('slider/current').remove();
      alert('Deleted successfully');
    });
  }
});
</script>
</body>
</html>
