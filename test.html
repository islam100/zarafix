<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Zara Fix - Admin Slider</title>
<style>
  body, html {
    margin:0; padding:0; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(to bottom, #87ceeb, #e0f7ff);
  }
  header {
    display:flex; justify-content:space-between; align-items:center; padding:10px 20px;
  }
  .logo {
    font-size:2.5rem; font-weight:900; color:#ef0400;
    text-shadow: 2px 2px 0 #ffea00, 4px 4px 0 #00f7ff, 6px 6px 8px rgba(0,0,0,0.35);
  }
  .dropdown {
    position:relative; display:inline-block;
  }
  .dropbtn {
    background:#2196f3; color:white; padding:10px 20px; border:none; border-radius:8px; cursor:pointer;
  }
  .dropdown-content {
    display:none; position:absolute; background:#f1f1f1; min-width:160px; box-shadow:0 8px 16px rgba(0,0,0,0.2); z-index:1;
  }
  .dropdown-content a {
    color:black; padding:12px 16px; text-decoration:none; display:block;
  }
  .dropdown-content a:hover { background:#ddd; }
  .dropdown:hover .dropdown-content { display:block; }
  #googleLoginBtn { background:#4285f4; color:white; border:none; padding:8px 16px; border-radius:8px; cursor:pointer; }
  .slider-container { max-width:480px; margin:20px auto; position:relative; overflow:hidden; border-radius:20px; box-shadow:0 4px 10px rgba(0,0,0,0.25); }
  .slider-container img { width:100%; display:none; }
  .slider-container img.active { display:block; }
  .upload-box { text-align:center; margin:20px auto; display:none; }
  .upload-box input[type=file] { padding:10px; }
  .upload-box button { margin-top:10px; padding:8px 15px; cursor:pointer; }
  .bottom-buttons { text-align:center; margin:20px auto; display:flex; justify-content:center; gap:15px; }
  .btn-3d { padding:10px 20px; border:none; border-radius:10px; color:white; cursor:pointer; box-shadow:0 5px 0 #444; }
  .green { background:linear-gradient(to right, #4caf50, #2e7d32); }
  .blue { background:linear-gradient(to right, #2196f3, #0d47a1); }
  .red { background:linear-gradient(to right, #f44336, #b71c1c); }
  .scrolling-text { position:fixed; bottom:0; width:100%; background:rgba(255,255,255,0.85); padding:8px 0; font-weight:700; overflow:hidden; white-space:nowrap; }
  .scrolling-text span { display:inline-block; padding-left:100%; animation:scroll-left 18s linear infinite; }
  @keyframes scroll-left { 0%{transform:translateX(0);} 100%{transform:translateX(-100%);} }
</style>
</head>
<body>

<header>
  <div class="logo">Zara Fix</div>
  <div class="dropdown">
    <button class="dropbtn">Menu</button>
    <div class="dropdown-content">
      <a href="#">Recharge Request</a>
      <a href="#">Service Request</a>
      <a href="#">Service Provider</a>
      <a href="#">Real Estate</a>
      <a href="#">Extra Button</a>
    </div>
  </div>
  <button id="googleLoginBtn">Google Login</button>
</header>

<div class="slider-container" id="sliderContainer"></div>

<div class="upload-box" id="uploadBox">
  <input type="file" id="imageFile" accept="image/*"><br>
  <button id="uploadBtn">Upload Image</button>
</div>

<div class="bottom-buttons">
  <button class="btn-3d green">Button 1</button>
  <button class="btn-3d blue">Button 2</button>
  <button class="btn-3d red">Button 3</button>
</div>

<div class="scrolling-text"><span>यहाँ आपका स्क्रोलिंग संदेश आएगा • Zara Fix में आपका स्वागत है • नई अपडेट्स देखें • जल्दी ही नया फीचर आ रहा है •</span></div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyD7ZqL-PVuFdd8rMVIyW7CgHQjPRGHD2h8",
  authDomain: "zara-fix-2e35a.firebaseapp.com",
  projectId: "zara-fix-2e35a",
  storageBucket: "zara-fix-2e35a.appspot.com",
  messagingSenderId: "636550144008",
  appId: "1:636550144008:web:a849496ad1d1557d7ab1bd"
};
firebase.initializeApp(firebaseConfig);

const auth = firebase.auth();
const db = firebase.database();
const storage = firebase.storage();

const loginBtn = document.getElementById('googleLoginBtn');
const uploadBox = document.getElementById('uploadBox');
const imageFile = document.getElementById('imageFile');
const uploadBtn = document.getElementById('uploadBtn');
const sliderContainer = document.getElementById('sliderContainer');

let sliderImages = [];
let currentIndex = 0;

// Admin UID (example) - change according to your DB
const adminUIDs = ["QT3LkEToHwaiORatoKfTx8QE45s2"];

// Login
loginBtn.addEventListener('click', () => {
  if(auth.currentUser){
    auth.signOut();
  } else {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider);
  }
});

auth.onAuthStateChanged(user=>{
  if(user){
    loginBtn.textContent="Logout";
    if(adminUIDs.includes(user.uid)){
      uploadBox.style.display="block";
    }
    loadSliderImages();
  } else {
    loginBtn.textContent="Google Login";
    uploadBox.style.display="none";
  }
});

// Upload image
uploadBtn.addEventListener('click', ()=>{
  const file = imageFile.files[0];
  if(!file) { alert('Select a file'); return; }
  const storageRef = storage.ref('slider/'+file.name);
  storageRef.put(file).then(snapshot=>{
    snapshot.ref.getDownloadURL().then(url=>{
      const newKey = db.ref('slider').push().key;
      db.ref('slider/'+newKey).set({ url: url, timestamp: Date.now() });
      alert('Image uploaded!');
      imageFile.value='';
      loadSliderImages();
    });
  });
});

// Load slider images
function loadSliderImages(){
  db.ref('slider').once('value', snapshot=>{
    sliderImages = [];
    snapshot.forEach(child=>{
      sliderImages.push({ key:child.key, url:child.val().url });
    });
    renderSlider();
  });
}

// Render slider
function renderSlider(){
  sliderContainer.innerHTML='';
  sliderImages.forEach((img, idx)=>{
    const imgEl = document.createElement('img');
    imgEl.src = img.url;
    if(idx===0) imgEl.classList.add('active');
    sliderContainer.appendChild(imgEl);
  });
  if(sliderImages.length>1) setInterval(()=>{
    const imgs = sliderContainer.querySelectorAll('img');
    imgs[currentIndex].classList.remove('active');
    currentIndex = (currentIndex+1)%imgs.length;
    imgs[currentIndex].classList.add('active');
  },3000);
}
</script>

</body>
</html>
