// 🔐 Login with Google
function login() {
  const provider = new firebase.auth.GoogleAuthProvider();
  firebase.auth().signInWithPopup(provider).catch(error => {
    console.error("Login Error:", error);
    alert("Login failed");
  });
}

// 🚪 Logout
function logout() {
  firebase.auth().signOut().then(() => {
    alert("Logged out");
    location.reload();
  });
}

// 🔁 Show/Hide login/logout buttons
firebase.auth().onAuthStateChanged(user => {
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");

  if (user) {
    // Logged in: hide login, show logout
    loginBtn.style.display = "none";
    logoutBtn.style.display = "inline-block";

    // Admin check (same logic as earlier)
    firebase.database().ref(`admins/${user.uid}`).once("value")
      .then(snapshot => {
        if (snapshot.val() === true) {
          loadPosters();
        } else {
          alert("Access Denied. Admins Only.");
          window.location.href = "index.html";
        }
      });
  } else {
    // Not logged in: show login, hide logout
    loginBtn.style.display = "inline-block";
    logoutBtn.style.display = "none";
  }
});
