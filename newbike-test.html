<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Post Bike/Car for Sale</title>
<style>
  label { display:block; margin-top:10px; }
  input, select, button { width:100%; padding:8px; margin-top:4px; }
</style>
<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>
</head>
<body>

<h2>Post Your Bike or Car for Sale</h2>

<form id="vehicleForm">

  <label>Category</label>
  <select id="category" required>
    <option value="Bike">Bike</option>
    <option value="Car">Car</option>
  </select>

  <label>Brand</label>
  <select id="brand" required></select>

  <label>Model Name</label>
  <input type="text" id="model" required>

  <label>Year</label>
  <input type="number" id="year" required>

  <label>Condition</label>
  <select id="condition" required>
    <option value="Excellent">Excellent</option>
    <option value="Good">Good</option>
    <option value="Average">Average</option>
    <option value="Needs Repair">Needs Repair</option>
  </select>

  <label>Price (â‚¹)</label>
  <input type="number" id="price" required>

  <label>City / Location</label>
  <input type="text" id="location" required>

  <label>Contact Number</label>
  <input type="tel" id="contact" required>

  <label>Upload Images (max 5)</label>
  <input type="file" id="images" accept="image/*" multiple required>

  <button type="submit">Post</button>

</form>

<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyAAOYtvC0kiu_vZTYuQ8phPyMqTEFJj9O0",
    authDomain: "new-bike-59133.firebaseapp.com",
    projectId: "new-bike-59133",
    storageBucket: "new-bike-59133.appspot.com",
    messagingSenderId: "966945954091",
    appId: "1:966945954091:web:c1387e3a27af68aef3cd6e"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const storage = firebase.storage();

  // Brand list
  const brands = {
    Bike: ["Hero", "Honda", "Bajaj", "TVS", "Yamaha", "Royal Enfield", "Suzuki", "KTM", "Electric", "Scooter"],
    Car: ["Maruti", "Hyundai", "Tata", "Mahindra", "Honda", "Toyota", "Kia", "MG", "Ford", "BMW"]
  };

  const categorySelect = document.getElementById('category');
  const brandSelect = document.getElementById('brand');

  function updateBrandOptions() {
    brandSelect.innerHTML = '';
    brands[categorySelect.value].forEach(b => {
      const opt = document.createElement('option');
      opt.value = b;
      opt.textContent = b;
      brandSelect.appendChild(opt);
    });
  }

  categorySelect.addEventListener('change', updateBrandOptions);
  updateBrandOptions(); // initialize

  // Form submit
  document.getElementById('vehicleForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const formData = {
      category: document.getElementById('category').value,
      brand: document.getElementById('brand').value,
      model: document.getElementById('model').value,
      year: document.getElementById('year').value,
      condition: document.getElementById('condition').value,
      price: document.getElementById('price').value,
      location: document.getElementById('location').value,
      contact: document.getElementById('contact').value,
      images: []
    };

    const files = document.getElementById('images').files;
    if (files.length > 5) {
      alert("You can upload maximum 5 images.");
      return;
    }

    // Upload images
    for (let file of files) {
      const storageRef = storage.ref(`vehicles/${Date.now()}-${file.name}`);
      await storageRef.put(file);
      const url = await storageRef.getDownloadURL();
      formData.images.push(url);
    }

    // Save to Firestore
    await db.collection('vehicles').add(formData);
    alert("Vehicle posted successfully!");
    document.getElementById('vehicleForm').reset();
    updateBrandOptions();
  });
</script>

</body>
</html>
