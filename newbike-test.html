<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bike Sale Post</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
</head>
<body class="bg-gray-100 p-6">

  <!-- Post Form Modal -->
  <div class="max-w-lg mx-auto bg-white p-6 rounded-xl shadow-lg">
    <h2 class="text-xl font-bold mb-4">Post Your Bike for Sale</h2>
    <form id="postForm" class="space-y-3">
      
      <label>Bike Category</label>
      <select id="bikeCategory" class="w-full border p-2 rounded" required>
        <option value="">-- Select Category --</option>
        <option value="Bike">Bike</option>
        <option value="Scooter">Scooter</option>
        <option value="Electric">Electric</option>
        <option value="Sports">Sports Bike</option>
      </select>

      <label>Bike Brand</label>
      <select id="bikeBrand" class="w-full border p-2 rounded" required>
        <option value="">-- Select Brand --</option>
        <option value="Hero">Hero</option>
        <option value="Honda">Honda</option>
        <option value="Bajaj">Bajaj</option>
        <option value="TVS">TVS</option>
        <option value="Yamaha">Yamaha</option>
        <option value="Suzuki">Suzuki</option>
        <option value="RoyalEnfield">Royal Enfield</option>
        <option value="KTM">KTM</option>
      </select>

      <label>Subcategory / Model Type</label>
      <select id="bikeSubCategory" class="w-full border p-2 rounded" required>
        <option value="">-- Select Subcategory --</option>
        <option value="Commuter">Commuter</option>
        <option value="Cruiser">Cruiser</option>
        <option value="Sports">Sports</option>
        <option value="Adventure">Adventure</option>
        <option value="Scooter">Scooter</option>
        <option value="Electric">Electric</option>
      </select>

      <label>Model Name</label>
      <input type="text" id="bikeModel" class="w-full border p-2 rounded" placeholder="e.g. Splendor+, Pulsar 150" required>

      <label>Year of Purchase</label>
      <input type="number" id="bikeYear" class="w-full border p-2 rounded" placeholder="e.g. 2019" required>

      <label>Bike Condition</label>
      <select id="bikeCondition" class="w-full border p-2 rounded" required>
        <option value="Excellent">Excellent</option>
        <option value="Good">Good</option>
        <option value="Average">Average</option>
        <option value="Needs Repair">Needs Repair</option>
      </select>

      <label>Price (â‚¹)</label>
      <input type="number" id="bikePrice" class="w-full border p-2 rounded" placeholder="Enter price" required>

      <label>City / Location</label>
      <input type="text" id="bikeLocation" class="w-full border p-2 rounded" placeholder="Enter city/location" required>

      <label>Contact Number</label>
      <input type="tel" id="bikeContact" class="w-full border p-2 rounded" placeholder="Enter your phone number" required>

      <label>Upload Image</label>
      <input type="file" id="bikeImage" accept="image/*" class="w-full" required>

      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded">Post Bike</button>
    </form>
  </div>

  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyAAOYtvC0kiu_vZTYuQ8phPyMqTEFJj9O0",
      authDomain: "new-bike-59133.firebaseapp.com",
      projectId: "new-bike-59133",
      storageBucket: "new-bike-59133.appspot.com",
      messagingSenderId: "966945954091",
      appId: "1:966945954091:web:c1387e3a27af68aef3cd6e"
    };

    // Init Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const storage = firebase.storage();

    // Form Submit
    document.getElementById("postForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const category = document.getElementById("bikeCategory").value;
      const brand = document.getElementById("bikeBrand").value;
      const subCategory = document.getElementById("bikeSubCategory").value;
      const model = document.getElementById("bikeModel").value;
      const year = document.getElementById("bikeYear").value;
      const condition = document.getElementById("bikeCondition").value;
      const price = document.getElementById("bikePrice").value;
      const location = document.getElementById("bikeLocation").value;
      const contact = document.getElementById("bikeContact").value;
      const file = document.getElementById("bikeImage").files[0];

      if (!file) {
        alert("Please upload an image!");
        return;
      }

      // Upload Image
      const storageRef = storage.ref("bikeImages/" + Date.now() + "_" + file.name);
      await storageRef.put(file);
      const imageUrl = await storageRef.getDownloadURL();

      // Save to Firestore
      await db.collection("bikePosts").add({
        category,
        brand,
        subCategory,
        model,
        year,
        condition,
        price,
        location,
        contact,
        imageUrl,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });

      alert("Bike Posted Successfully!");
      document.getElementById("postForm").reset();
    });
  </script>

</body>
</html>
