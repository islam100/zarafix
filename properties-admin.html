<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin Panel</title>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<style>
  .card { border:1px solid #ccc; padding:10px; margin:10px; max-width:300px; display:inline-block; }
  .card img { width:100%; }
  button { margin:5px; }
</style>
</head>
<body>
<h1>Admin Panel</h1>
<button onclick="loginAdmin()">Login as Admin</button>
<div id="adminProperties"></div>

<script>
const firebaseConfig = { /* same config */ };
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const auth = firebase.auth();

const adminEmail = "zarasamajiksevasanstha@gmail.com";

function loginAdmin() {
  const email = prompt("Admin Email:");
  const password = prompt("Password:");
  auth.signInWithEmailAndPassword(email, password)
    .then(user => {
      if(user.user.email !== adminEmail){
        alert("Access denied!");
        auth.signOut();
        return;
      }
      fetchAdminProperties();
    }).catch(err => alert(err.message));
}

function fetchAdminProperties() {
  db.ref('properties').on('value', snapshot => {
    const properties = snapshot.val();
    let html = '';
    for (let key in properties) {
      const prop = properties[key];
      html += `<div class="card">
                <img src="${prop.imageUrl}" alt="${prop.title}">
                <h3>${prop.title}</h3>
                <p>${prop.city} - â‚¹${prop.price}</p>
                <p>${prop.description}</p>
                <button onclick="approve('${key}')">Approve</button>
                <button onclick="deleteProp('${key}')">Delete</button>
              </div>`;
    }
    document.getElementById('adminProperties').innerHTML = html;
  });
}

function approve(key){
  db.ref('properties/' + key).update({ approved: true });
}

function deleteProp(key){
  db.ref('properties/' + key).remove();
}
</script>
</body>
</html>
