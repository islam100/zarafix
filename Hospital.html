<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hospital Provider Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:20px; }
    h2 { margin-top:30px; }
    .card { background:#fff; padding:15px; margin:10px 0; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .btn { background:#25D366; color:#fff; padding:8px 12px; text-decoration:none; border-radius:5px; display:inline-block; }
    .searchBar { margin:20px 0; display:flex; gap:10px; }
    input, select { padding:8px; width:100%; border:1px solid #ccc; border-radius:5px; }
    form input, form select { margin-bottom:10px; }
  </style>
</head>
<body>

<h2>Hospital Provider Post</h2>

<!-- Post Form -->
<form id="hospitalForm">
  <input type="text" id="hospitalName" placeholder="Hospital Name" required><br>
  <input type="text" id="hospitalType" placeholder="Hospital Type (Government, Private, Clinic...)" required><br>
  <input type="text" id="address" placeholder="Address" required><br>
  <input type="text" id="phone" placeholder="WhatsApp Number" required><br>
  <button type="submit">Post</button>
</form>

<!-- 🔍 Search Bar -->
<div class="searchBar">
  <input type="text" id="searchInput" placeholder="Search by hospital name, type, address...">
  <select id="categoryFilter">
    <option value="">All Hospitals</option>
    <option value="Government">Government</option>
    <option value="Private">Private</option>
    <option value="Clinic">Clinic</option>
    <option value="Trust">Trust</option>
  </select>
</div>

<h2>Hospital Listings</h2>
<div id="listings"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
<script>
  // 🔹 Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyAa8htkfGK-4D3cIQVyxT3o_8WMvghkr-8",
    authDomain: "zarafix-01.firebaseapp.com",
    databaseURL: "https://zarafix-01-default-rtdb.firebaseio.com",
    projectId: "zarafix-01",
    storageBucket: "zarafix-01.appspot.com",
    messagingSenderId: "847318857032",
    appId: "1:847318857032:web:36f08cbb84b93bcb1af55e"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  const form = document.getElementById("hospitalForm");
  const listings = document.getElementById("listings");

  // 🔹 Save hospital post
  form.addEventListener("submit", e => {
    e.preventDefault();
    const data = {
      hospitalName: document.getElementById("hospitalName").value,
      hospitalType: document.getElementById("hospitalType").value,
      address: document.getElementById("address").value,
      phone: document.getElementById("phone").value
    };
    db.ref("hospitals").push(data);
    form.reset();
  });

  // 🔹 Render hospital list
  function renderList(snapshot) {
    listings.innerHTML = "";
    const search = document.getElementById("searchInput").value.toLowerCase();
    const filter = document.getElementById("categoryFilter").value;

    snapshot.forEach(child => {
      const item = child.val();
      if (
        (item.hospitalName.toLowerCase().includes(search) ||
        item.hospitalType.toLowerCase().includes(search) ||
        item.address.toLowerCase().includes(search)) &&
        (filter === "" || item.hospitalType === filter)
      ) {
        listings.innerHTML += `
          <div class="card">
            <h3>${item.hospitalName}</h3>
            <p><b>Type:</b> ${item.hospitalType}</p>
            <p><b>Address:</b> ${item.address}</p>
            <a class="btn" href="https://wa.me/${item.phone}" target="_blank">💬 WhatsApp</a>
          </div>`;
      }
    });
  }

  // 🔹 Fetch and listen
  db.ref("hospitals").on("value", snapshot => renderList(snapshot));
  document.getElementById("searchInput").addEventListener("input", () => db.ref("hospitals").once("value", renderList));
  document.getElementById("categoryFilter").addEventListener("change", () => db.ref("hospitals").once("value", renderList));
</script>
</body>
</html>
