<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Hospital Service</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#f5f5f5; }
    header { background:linear-gradient(135deg,#2196F3,#21CBF3); color:white;
             display:flex; align-items:center; justify-content:space-between;
             padding:10px 20px; box-shadow:0 3px 8px rgba(0,0,0,0.3); }
    header h1 { margin:0; font-size:20px; text-shadow:1px 1px 3px #000; }
    button { cursor:pointer; padding:6px 10px; border:none; border-radius:6px;
             box-shadow:0 3px 5px rgba(0,0,0,0.25); font-weight:bold; margin:3px; font-size:13px; }
    .btn3d { background:#4CAF50; color:#fff; }
    .btn3d:disabled { background:#999; box-shadow:none; }
    .logoutBtn { background:#E53935; color:#fff; }
    .newPostBtn { background:#FF9800; color:#fff; margin-left:10px; }
    .waBtn { background:#25D366; color:#fff; }

    /* Grid */
    .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
            gap:12px; padding:12px; }
    .card { background:#fff; border-radius:10px; box-shadow:0 3px 5px rgba(0,0,0,0.2);
            padding:10px; position:relative; transition:transform .2s; cursor:pointer; font-size:13px; border:2px solid red;}
    .card:hover { transform:scale(1.02); }
    .card img { width:100%; height:auto; object-fit:cover; border-radius:6px; }
    .card h3 { margin:6px 0 3px; font-size:15px; }
    .card p { margin:1px 0; font-size:13px; }

    .pending { background:#ffcdd2; border:2px solid #f44336; animation: blinkBorder 1s infinite; }
    @keyframes blinkBorder { 50% { border-color: #b71c1c; } }

    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%;
             background:rgba(0,0,0,0.6); align-items:center; justify-content:center; }
    .modal-content { background:#fff; padding:15px; border-radius:10px; width:90%; max-width:420px;
                     max-height:90%; overflow:auto; position:relative; font-size:14px; }
    .close { position:absolute; top:8px; right:12px; cursor:pointer; font-weight:bold; font-size:18px; }

    form label { font-size:13px; font-weight:bold; margin-top:6px; display:block; }
    form input, form select { width:100%; padding:5px; margin:3px 0 8px;
                              border:1px solid #ccc; border-radius:6px; font-size:13px; }
    .btnRow { margin-top:6px; display:flex; flex-wrap:wrap; }
  </style>
</head>
<body>
<header>
  <h1>Hospital Service</h1>
  <div>
    <button id="loginBtn" class="btn3d">Login</button>
    <button id="logoutBtn" class="logoutBtn" style="display:none;">Logout</button>
    <button id="newPostBtn" class="newPostBtn" style="display:none;">+ New Post</button>
  </div>
</header>

<main>
  <div class="grid" id="posts"></div>
</main>

<!-- Post Form Modal -->
<div class="modal" id="postModal">
  <div class="modal-content">
    <span class="close" id="closeForm">&times;</span>
    <h2>New Hospital Post</h2>
    <form id="postForm">
      <label>Hospital Name</label>
      <input type="text" id="hospitalName" required>
      <label>Doctor Name</label>
      <input type="text" id="doctorName" required>
      <label>Address</label>
      <input type="text" id="address" required>
      <label>Phone</label>
      <input type="tel" id="phone" required>
      <label>Category</label>
      <select id="category" required>
        <option value="General">General</option>
        <option value="Specialist">Specialist</option>
        <option value="Emergency">Emergency</option>
      </select>
      <label>Images (max 5)</label>
      <input type="file" id="images" accept="image/*" multiple>
      <button type="submit" class="btn3d">Submit Post</button>
    </form>
  </div>
</div>

<!-- Card View Modal -->
<div class="modal" id="cardModal">
  <div class="modal-content" id="cardContent">
    <span class="close" id="closeCard">&times;</span>
  </div>
</div>

<script>
// ✅ Hospital Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyDT-D80OSwDetRfDEKHTKNvdRTPJnG8Cs4",
  authDomain: "hospital-dc40b.firebaseapp.com",
  databaseURL: "https://hospital-dc40b-default-rtdb.firebaseio.com",
  projectId: "hospital-dc40b",
  storageBucket: "hospital-dc40b.appspot.com",
  messagingSenderId: "445806713376",
  appId: "1:445806713376:web:77dab96b91f7fc71c07a45"
};

firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.database();

// ✅ New imgbb API key
const imgbbKey = "636b058a892ade35848bc77878ebf217";

// Upload images to imgbb
async function uploadImages(files){
  const urls=[];
  for(let i=0;i<Math.min(5,files.length);i++){
    const f=files[i];
    const fd=new FormData();
    fd.append("image",f);
    const r=await fetch(`https://api.imgbb.com/1/upload?key=${imgbbKey}`,{method:"POST",body:fd});
    const j=await r.json();
    urls.push(j.data.url);
  }
  return urls;
}

// बाकी तुम्हारे Ambulance वाले logic जैसा ही रहेगा (login, logout, post submit, load posts)
</script>
</body>
</html>
