<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Popup Ads Slideshow</title>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
  body { font-family: Arial; }
  #popup {
    display: none;
    position: fixed;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
    z-index: 1000;
    flex-direction: column;
  }
  #popup img {
    max-width: 80%;
    max-height: 80%;
    border: 5px solid white;
    border-radius: 10px;
  }
  #closeBtn {
    margin-top: 15px;
    background: red;
    color:white;
    border:none;
    padding: 10px 15px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
  }
</style>
</head>
<body>

<button onclick="showPopup()">Open Popup Ads</button>

<div id="popup">
  <img id="popupImg" src="">
  <button id="closeBtn" onclick="hidePopup()">Close</button>
</div>

<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyAAOYtvC0kiu_vZTYuQ8phPyMqTEFJj9O0",
    authDomain: "new-bike-59133.firebaseapp.com",
    databaseURL: "https://new-bike-59133-default-rtdb.firebaseio.com",
    projectId: "new-bike-59133",
    storageBucket: "new-bike-59133.appspot.com",
    messagingSenderId: "966945954091",
    appId: "1:966945954091:web:c1387e3a27af68aef3cd6e"
  };
  firebase.initializeApp(firebaseConfig);

  const db = firebase.database();
  let images = [];
  let currentIndex = 0;
  let slideInterval;

  // Fetch images from Firebase (popupAds path)
  db.ref('popupAds').on('value', snapshot => {
    images = [];
    snapshot.forEach(child => {
      images.push(child.val()); // value is direct URL
    });
    console.log("Images Loaded:", images);
  });

  function showPopup() {
    if(images.length === 0) { alert("No images found!"); return; }
    document.getElementById('popup').style.display = 'flex';
    currentIndex = 0;
    document.getElementById('popupImg').src = images[currentIndex];
    slideInterval = setInterval(() => {
      currentIndex = (currentIndex + 1) % images.length;
      document.getElementById('popupImg').src = images[currentIndex];
    }, 3000); // 3 sec per image
  }

  function hidePopup() {
    document.getElementById('popup').style.display = 'none';
    clearInterval(slideInterval);
  }
</script>

</body>
</html>
