<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZaraFix Property Listing</title>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f0f0f0;}
  .container { display:flex; flex-wrap:wrap; justify-content:center; padding:20px; }
  .card { width:300px; margin:15px; background:#fff; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.1);
          overflow:hidden; cursor:pointer; transition: transform 0.3s, box-shadow 0.3s; }
  .card:hover { transform: scale(1.05); box-shadow:0 10px 25px rgba(0,0,0,0.2);}
  .card img { width:100%; height:200px; object-fit:cover; }
  .card-content { padding:15px; }
  .card-content h3 { margin:0 0 10px; }
  .card-content p { margin:0; font-size:14px; color:#555; }
  .buttons { display:flex; justify-content:space-between; margin-top:10px; }
  .buttons button { padding:5px 10px; border:none; border-radius:5px; cursor:pointer; }
  .whatsapp-btn { background:#25D366; color:white; }
</style>
</head>
<body>
<h2 style="text-align:center; padding:20px;">ZaraFix Property Listing</h2>
<div class="container" id="propertyContainer"></div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDTj2n1yhr1sFmuyBZ-jUwOmx1YqAN5QjA",
  authDomain: "property-20d6d.firebaseapp.com",
  databaseURL: "https://property-20d6d-default-rtdb.firebaseio.com",
  projectId: "property-20d6d",
  storageBucket: "property-20d6d.appspot.com",
  messagingSenderId: "916859697394",
  appId: "1:916859697394:web:2a8f9ad2d62f8306dcb86b"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function fetchProperties() {
    db.ref('properties').orderByChild('approved').equalTo(true).on('value', snapshot => {
        const container = document.getElementById('propertyContainer');
        container.innerHTML = '';
        snapshot.forEach(childSnapshot => {
            const data = childSnapshot.val();
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="${data.imageURL}" alt="Property Image">
                <div class="card-content">
                    <h3>${data.title}</h3>
                    <p>${data.description}</p>
                    <div class="buttons">
                        <button class="whatsapp-btn" onclick="window.open('https://wa.me/${data.whatsapp}','_blank')">WhatsApp</button>
                    </div>
                </div>`;
            card.onclick = () => {
                const overlay = document.createElement('div');
                overlay.style.position='fixed';
                overlay.style.top='0';
                overlay.style.left='0';
                overlay.style.width='100%';
                overlay.style.height='100%';
                overlay.style.background='rgba(0,0,0,0.8)';
                overlay.style.display='flex';
                overlay.style.justifyContent='center';
                overlay.style.alignItems='center';
                overlay.style.zIndex='999';
                overlay.innerHTML = `<img src="${data.imageURL}" style="max-width:90%; max-height:90%; border-radius:10px;">`;
                overlay.onclick = () => overlay.remove();
                document.body.appendChild(overlay);
            };
            container.appendChild(card);
        });
    });
}

fetchProperties();
</script>
</body>
</html>
