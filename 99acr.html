<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Zara Properties — 99acres-style (Final)</title>

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>

<style>
:root{--brand:#2563eb;--muted:#64748b;--card:#fff;--radius:12px}
*{box-sizing:border-box}
body{font-family:Inter,system-ui,Arial;margin:0;background:#f5f7fb;color:#0f172a}
header{background:linear-gradient(180deg,#071033,#0b1430);color:white;padding:12px 16px;display:flex;align-items:center;justify-content:space-between}
.logo{width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,#60a5fa,#2563eb)}
.container{max-width:1200px;margin:18px auto;padding:0 16px}
.panel{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 20px rgba(16,24,40,.06);margin-bottom:14px}
.filters{display:grid;grid-template-columns:1.2fr 1fr 1fr 1fr 1fr auto;gap:10px}
input,select,textarea{padding:8px;border-radius:8px;border:1px solid #e6edf3;width:100%}
.chips{display:flex;gap:8px;margin-top:10px}
.chip{padding:6px 10px;border-radius:999px;background:#eef2ff;border:1px solid #dbeafe;cursor:pointer}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
.card{background:var(--card);border-radius:12px;overflow:hidden;border:1px solid #e8eef7;display:flex;flex-direction:column}
.gallery{height:180px;background:#f1f5f9;display:flex;align-items:center;justify-content:center;position:relative}
.gallery img{width:100%;height:100%;object-fit:cover}
.badge{position:absolute;top:8px;left:8px;background:#111827;color:#fff;padding:6px 10px;border-radius:999px;font-size:12px}
.featured{position:absolute;top:8px;right:8px;background:#f59e0b;color:#fff;padding:6px 10px;border-radius:6px;font-weight:700}
.card-body{padding:12px;display:flex;flex-direction:column;min-height:170px}
.meta{color:var(--muted);font-size:13px;margin-top:6px}
.tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.tag{font-size:12px;background:#f1f5f9;border:1px solid #e2e8f0;border-radius:999px;padding:6px 10px}
.foot{margin-top:auto;display:flex;gap:8px;align-items:center}
.small{padding:6px 8px;border-radius:8px;font-size:13px;background:#eef2ff;border:0}
.admin-controls{display:flex;gap:6px}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px;z-index:60}
.modal.open{display:flex}
.modal-card{width:min(920px,98vw);background:#fff;border-radius:12px;overflow:hidden}
.pagination{display:flex;gap:8px;justify-content:center;margin:14px 0}
.loading{opacity:.6;pointer-events:none}
@media (max-width:980px){.grid{grid-template-columns:repeat(2,1fr)}.filters{grid-template-columns:1fr 1fr 1fr 1fr auto}}
@media (max-width:600px){.grid{grid-template-columns:1fr}.filters{grid-template-columns:1fr 1fr}}
</style>
</head>
<body>
<header>
  <div style="display:flex;gap:12px;align-items:center"><div class="logo"></div><div><strong>Zara Properties</strong><div style="font-size:12px;color:#cbd5e1">99acres-style • No map</div></div></div>
  <div style="display:flex;gap:8px;align-items:center">
    <div id="userEmail" style="color:#cbd5e1"></div>
    <button id="loginBtn" class="small" style="background:transparent;border:1px solid rgba(255,255,255,.12);color:#fff">Google Sign-in</button>
    <button id="logoutBtn" class="small" style="display:none;background:#ef4444;color:#fff">Logout</button>
  </div>
</header>

<main class="container">
  <!-- Filters -->
  <section class="panel">
    <div style="display:flex;justify-content:space-between;align-items:center"><strong>Search & Filters</strong><div style="color:var(--muted)">Search by title/location • Price • BHK</div></div>
    <div style="margin-top:10px" class="filters">
      <input id="qText" placeholder="जैसे: 2 BHK, मीरा रोड, दुकान" />
      <select id="qLocation"><option value="">सभी लोकेशन</option></select>
      <select id="qBHK"><option value="">सभी BHK</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4+</option></select>
      <input id="qMin" type="number" placeholder="Min ₹" />
      <input id="qMax" type="number" placeholder="Max ₹" />
      <select id="qSort"><option value="newest">Newest</option><option value="priceLow">Price Low→High</option><option value="priceHigh">Price High→Low</option></select>
    </div>
    <div class="chips" id="chips"><div class="chip" data-key="verified">Verified</div><div class="chip" data-key="owner">Owner</div><div class="chip" data-key="builder">Builder</div><div class="chip" data-key="agent">Agent</div></div>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px"><button id="btnApply" class="small" style="background:var(--brand);color:#fff">Apply</button><button id="btnReset" class="small">Reset</button></div>
  </section>

  <!-- Results -->
  <section>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px"><div><strong id="resultCount">0</strong> परिणाम</div><div style="color:var(--muted)">Public listings — Admin can manage</div></div>
    <div id="grid" class="grid"></div>
    <div id="pagination" class="pagination"></div>
  </section>

  <!-- Admin Panel -->
  <section id="adminPanel" class="panel" style="display:none;margin-top:18px">
    <div style="display:flex;justify-content:space-between;align-items:center"><strong>Admin Panel — Add / Edit Listing</strong><div style="color:var(--muted)">Only zarasamajiksevasanstha@gmail.com</div></div>

    <div style="margin-top:10px;display:grid;grid-template-columns:1fr 1fr;gap:10px">
      <input id="fTitle" placeholder="Title (e.g., 2 BHK Flat)" />
      <input id="fPrice" type="number" placeholder="Price (₹)" />
      <input id="fLocation" placeholder="Location (e.g., Nalasopara)" />
      <select id="fBHK"><option value="">BHK</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4+</option></select>
      <input id="fArea" placeholder="Area (sqft)" />
      <input id="fPhone" placeholder="Phone (with country code e.g. 919999900001)" />
    </div>

    <div style="margin-top:10px;display:grid;grid-template-columns:1fr 1fr;gap:10px">
      <input id="fWhatsapp" placeholder="WhatsApp (without + prefix)" />
      <input id="fImageFiles" type="file" accept="image/*" multiple />
    </div>

    <div style="margin-top:10px"><textarea id="fDesc" placeholder="Description" style="width:100%;min-height:100px"></textarea></div>

    <div style="margin-top:10px;display:flex;gap:8px;align-items:center">
      <label style="display:flex;align-items:center;gap:8px"><input id="fVerified" type="checkbox"/> Verified</label>
      <label style="display:flex;align-items:center;gap:8px"><input id="fFeatured" type="checkbox"/> Featured</label>
      <select id="fOwner" style="margin-left:8px"><option value="owner">owner</option><option value="builder">builder</option><option value="agent">agent</option></select>
      <button id="btnAdd" class="small" style="background:var(--brand);color:#fff">Upload Listing</button>
      <button id="btnUpdate" class="small" style="background:#059669;color:#fff;display:none">Update Listing</button>
      <button id="btnCancelEdit" class="small" style="display:none">Cancel Edit</button>
      <div id="adminLoader" style="margin-left:8px;color:var(--muted);display:none">Processing...</div>
    </div>
  </section>
</main>

<!-- Gallery modal -->
<div id="modal" class="modal"><div class="modal-card" id="modalCard"></div></div>

<script>
/* ========== CONFIG ========== */
const firebaseConfig = {
  apiKey: "AIzaSyDTj2n1yhr1sFmuyBZ-jUwOmx1YqAN5QjA",
  authDomain: "property-20d6d.firebaseapp.com",
  databaseURL: "https://property-20d6d-default-rtdb.firebaseio.com",
  projectId: "property-20d6d",
  storageBucket: "property-20d6d.appspot.com",
  messagingSenderId: "916859697394",
  appId: "1:916859697394:web:2a8f9ad2d62f8306dcb86b"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth(), db = firebase.database(), storage = firebase.storage();

/* ========== ADMIN (only this email allowed in UI) ========== */
const ADMIN_EMAIL = 'zarasamajiksevasanstha@gmail.com';

/* ========== STATE & HELPERS ========== */
const state = { all:[], filtered:[], page:1, perPage:9, chips:{verified:false, owner:false, builder:false, agent:false}, query:{text:'', location:'', bhk:'', min:0, max:Infinity, sort:'newest'} };
const $ = s => document.querySelector(s);
const fmtINR = n => new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',maximumFractionDigits:0}).format(Number(n)||0);
const daysAgo = t => { const d=(Date.now()-(Number(t)||0))/86400000; if(d<1) return 'आज'; if(d<2) return 'कल'; return `${Math.floor(d)} दिन पहले`; };

/* ========== AUTH UI ========== */
$('#loginBtn').addEventListener('click', ()=> {
  const provider = new firebase.auth.GoogleAuthProvider();
  auth.signInWithPopup(provider).catch(e=>alert('Login error: '+e.message));
});
$('#logoutBtn').addEventListener('click', ()=> auth.signOut());

auth.onAuthStateChanged(user=>{
  if(user){
    $('#loginBtn').style.display='none'; $('#logoutBtn').style.display='inline-block';
    $('#userEmail').textContent = user.email;
    $('#adminPanel').style.display = (user.email === ADMIN_EMAIL) ? 'block' : 'none';
  } else {
    $('#loginBtn').style.display='inline-block'; $('#logoutBtn').style.display='none';
    $('#userEmail').textContent = ''; $('#adminPanel').style.display = 'none';
  }
});

/* ========== LIVE LOAD PROPERTIES ========== */
const propsRef = db.ref('properties');
propsRef.on('value', snap=>{
  const arr = [];
  snap.forEach(ch=>{
    const v = ch.val();
    arr.push({
      id: ch.key,
      title: v.title||'',
      price: Number(v.price)||0,
      location: v.location||'',
      bhk: v.bhk||'',
      area: v.area||'',
      phone: v.phone||'',
      whatsapp: v.whatsapp||'',
      description: v.description||'',
      imageUrls: v.imageUrls || [],
      imagePaths: v.imagePaths || [],
      owner: v.owner||'owner',
      verified: !!v.verified,
      featured: !!v.featured,
      time: v.time || 0
    });
  });
  state.all = arr.reverse();
  populateLocations(); applyAndRender();
});

/* ========== LOCATIONS ========== */
function populateLocations(){
  const sel = $('#qLocation');
  const uniq = Array.from(new Set(state.all.map(x=>x.location).filter(Boolean))).sort();
  sel.innerHTML = '<option value="">सभी लोकेशन</option>' + uniq.map(l=>`<option value="${l}">${l}</option>`).join('');
}

/* ========== FILTERS ========== */
$('#btnApply').addEventListener('click', ()=> {
  state.query.text = $('#qText').value.trim().toLowerCase(); state.query.location = $('#qLocation').value; state.query.bhk = $('#qBHK').value;
  const min = parseInt($('#qMin').value||'0',10); const maxVal = $('#qMax').value.trim(); const max = maxVal ? parseInt(maxVal,10) : Infinity;
  state.query.min = isNaN(min)?0:min; state.query.max = isNaN(max)?Infinity:max; state.query.sort = $('#qSort').value; state.page=1; applyAndRender();
});
$('#btnReset').addEventListener('click', ()=> { $('#qText').value=''; $('#qLocation').value=''; $('#qBHK').value=''; $('#qMin').value=''; $('#qMax').value=''; $('#qSort').value='newest'; state.query={text:'',location:'',bhk:'',min:0,max:Infinity,sort:'newest'}; document.querySelectorAll('#chips .chip').forEach(c=>c.classList.remove('active')); state.chips={verified:false,owner:false,builder:false,agent:false}; state.page=1; applyAndRender(); });
document.querySelectorAll('#chips .chip').forEach(ch=> ch.addEventListener('click', ()=> { ch.classList.toggle('active'); state.chips[ch.dataset.key] = ch.classList.contains('active'); state.page=1; applyAndRender(); }));

/* ========== APPLY / RENDER ========== */
function applyFilters(list){
  const q=state.query, c=state.chips;
  return list.filter(it=>{
    const s = `${it.title} ${it.location} ${it.description}`.toLowerCase();
    const inText = !q.text || s.includes(q.text);
    const inLoc = !q.location || it.location === q.location;
    const inBhk = !q.bhk || (q.bhk === '4' ? (Number(it.bhk)>=4) : it.bhk==q.bhk);
    const inPrice = it.price >= (isFinite(q.min)?q.min:0) && it.price <= (isFinite(q.max)?q.max:Infinity);
    const cVerified = !c.verified || it.verified;
    const cOwner = !c.owner || it.owner==='owner';
    const cBuilder = !c.builder || it.owner==='builder';
    const cAgent = !c.agent || it.owner==='agent';
    return inText && inLoc && inBhk && inPrice && cVerified && cOwner && cBuilder && cAgent;
  });
}
function applySort(list){
  const arr = [...list];
  switch(state.query.sort){
    case 'priceLow': arr.sort((a,b)=>a.price-b.price); break;
    case 'priceHigh': arr.sort((a,b)=>b.price-a.price); break;
    default: arr.sort((a,b)=> (b.featured?1:0) - (a.featured?1:0) || (b.time||0) - (a.time||0));
  }
  return arr;
}
function paginate(list){ const start=(state.page-1)*state.perPage; return list.slice(start,start+state.perPage); }
function applyAndRender(){ const filtered=applyFilters(state.all); const sorted=applySort(filtered); state.filtered=sorted; $('#resultCount').textContent=filtered.length; renderCards(paginate(sorted)); renderPagination(Math.ceil(sorted.length/state.perPage)); }

/* ========== RENDER CARDS ========== */
function renderCards(items){
  const grid = $('#grid'); if(!items.length){ grid.innerHTML = '<div style="grid-column:1/-1;padding:18px;text-align:center;color:#64748b;background:#fff;border-radius:12px">कोई परिणाम नहीं मिला</div>'; return; }
  const user = auth.currentUser; const isAdmin = user && user.email === ADMIN_EMAIL;
  grid.innerHTML = items.map(it=>`
    <div class="card">
      <div class="gallery" data-urls='${JSON.stringify(it.imageUrls)}' onclick="openGallery(this)"><img src="${it.imageUrls[0] || 'https://via.placeholder.com/1200x800?text=No+Image'}" alt="${escapeHtml(it.title)}" /><div class="badge">${it.verified ? 'Verified' : 'Posted'} • ${daysAgo(it.time)}</div>${it.featured ? '<div class="featured">FEATURED</div>' : ''}</div>
      <div class="card-body"><div style="font-weight:800">${escapeHtml(it.title)}</div><div class="meta">${escapeHtml(it.location)} • ${escapeHtml(it.bhk)} BHK • ${escapeHtml(it.area)} sqft</div><div style="margin-top:8px;color:#334155;font-size:14px">${escapeHtml(it.description||'').slice(0,160)}${(it.description||'').length>160?'...':''}</div><div class="tags" style="margin-top:8px"><div class="tag">${escapeHtml(it.owner)}</div><div class="tag">${fmtINR(it.price)}</div></div><div class="foot"><button class="small" onclick="contactWhatsApp('${it.whatsapp}','${encodeURIComponent('Hi, I saw your listing: '+it.title)}')">WhatsApp</button>${isAdmin?`<div class="admin-controls"><button class="small" data-edit="${it.id}">Edit</button><button class="small" data-del="${it.id}" style="background:#ef4444">Delete</button></div>`:`<a class="small" href="tel:${it.phone||''}">Call</a>`}</div></div>
    </div>
  `).join('');

  // bind delete/edit
  grid.querySelectorAll('[data-del]').forEach(b=> b.addEventListener('click', async ()=>{
    if(!confirm('क्या आप इस लिस्टिंग को डिलीट करना चाहते हैं?')) return;
    const id = b.dataset.del;
    const user = auth.currentUser; if(!user || user.email !== ADMIN_EMAIL){ alert('Not authorized'); return; }
    try{
      const snap = await db.ref('properties/'+id).once('value'); const data = snap.val() || {};
      const paths = data.imagePaths || [];
      for(const p of paths){ if(p){ try{ await storage.ref(p).delete(); }catch(e){ console.warn('delete failed',p,e.message); } } }
      await db.ref('properties/'+id).remove(); alert('Deleted');
    }catch(err){ alert('Delete error: '+err.message) }
  }));

  grid.querySelectorAll('[data-edit]').forEach(b=> b.addEventListener('click', ()=> startEdit(b.dataset.edit)));
}

/* ========== PAGINATION ====== */
function renderPagination(pages){
  const pag = $('#pagination'); if(pages<=1){ pag.innerHTML=''; return; } let html=''; for(let i=1;i<=pages;i++) html += `<button class="small" data-p="${i}" style="${i===state.page?'background:#111;color:#fff':''}">${i}</button>`; pag.innerHTML=html; pag.querySelectorAll('[data-p]').forEach(b=>b.addEventListener('click', ()=> { state.page = +b.dataset.p; applyAndRender(); }));
}

/* ========== GALLERY MODAL ====== */
function openGallery(el){ const urls = JSON.parse(el.dataset.urls||'[]'); const modal = $('#modal'); const card = $('#modalCard'); if(!urls.length) return; card.innerHTML = `<div style="padding:12px"><div style="display:flex;justify-content:space-between;align-items:center"><strong>Gallery</strong><button onclick="closeModal()" class="small">Close</button></div><div style="display:flex;gap:12px;margin-top:12px"><div style="flex:1"><img id="mainImg" src="${urls[0]}" style="width:100%;height:420px;object-fit:contain;border-radius:8px"/></div><div style="width:120px;display:flex;flex-direction:column;gap:8px;overflow:auto;height:420px">${urls.map(u=>`<img src="${u}" onclick="document.getElementById('mainImg').src='${u}'" style="width:100%;height:80px;object-fit:cover;border-radius:6px;cursor:pointer"/>`).join('')}</div></div></div>`; modal.classList.add('open'); }
function closeModal(){ $('#modal').classList.remove('open'); }

/* ========== CONTACT WHATSAPP ====== */
function contactWhatsApp(num,text){ const base = num ? `https://wa.me/${num}?text=${text}` : `https://wa.me/?text=${text}`; window.open(base,'_blank'); }

/* ========== ADD / UPDATE (ADMIN) ========== */
$('#btnAdd').addEventListener('click', async ()=>{
  const user = auth.currentUser; if(!user || user.email !== ADMIN_EMAIL){ alert('You are not authorized'); return; }
  $('#adminLoader').style.display='inline'; $('#btnAdd').disabled=true;
  try{
    const title = $('#fTitle').value.trim(); const price = parseInt($('#fPrice').value||'0',10); const location = $('#fLocation').value.trim();
    const bhk = $('#fBHK').value; const area = $('#fArea').value.trim(); const phone = $('#fPhone').value.trim(); const whatsapp = $('#fWhatsapp').value.trim();
    const desc = $('#fDesc').value.trim(); const owner = $('#fOwner').value; const verified = $('#fVerified').checked; const featured = $('#fFeatured').checked;
    const files = $('#fImageFiles').files;
    if(!title || !price || !location){ alert('Title, Price, Location required'); return; }
    if(files.length > 5){ alert('Max 5 images allowed'); return; }
    const imageUrls=[]; const imagePaths=[];
    if(files.length){
      for(let i=0;i<files.length;i++){
        const f = files[i]; if(f.size > 5*1024*1024){ alert('Each image max 5MB'); throw new Error('file too large'); }
        const path = `properties/${Date.now()}_${Math.random().toString(36).slice(2,8)}_${f.name}`;
        const task = await storage.ref(path).put(f); const url = await task.ref.getDownloadURL(); imageUrls.push(url); imagePaths.push(path);
      }
    }
    const payload = { title, price, location, bhk, area, phone, whatsapp, description:desc, owner, verified, featured, imageUrls, imagePaths, time: Date.now() };
    await db.ref('properties').push(payload);
    resetForm(); alert('Listing uploaded');
  }catch(err){ console.error(err); if(err.message) alert('Error: '+err.message); }
  $('#adminLoader').style.display='none'; $('#btnAdd').disabled=false;
});

/* ========== EDIT FLOW ========== */
let editingId = null;
async function startEdit(id){
  const user = auth.currentUser; if(!user || user.email !== ADMIN_EMAIL){ alert('Not authorized'); return; }
  const snap = await db.ref('properties/'+id).once('value'); const v = snap.val(); if(!v){ alert('Not found'); return; }
  editingId = id; $('#fTitle').value=v.title||''; $('#fPrice').value=v.price||''; $('#fLocation').value=v.location||''; $('#fBHK').value=v.bhk||''; $('#fArea').value=v.area||''; $('#fPhone').value=v.phone||''; $('#fWhatsapp').value=v.whatsapp||''; $('#fDesc').value=v.description||''; $('#fOwner').value=v.owner||'owner'; $('#fVerified').checked=!!v.verified; $('#fFeatured').checked=!!v.featured; $('#btnAdd').style.display='none'; $('#btnUpdate').style.display='inline-block'; $('#btnCancelEdit').style.display='inline-block'; window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});
}
$('#btnCancelEdit').addEventListener('click', ()=> resetForm());
$('#btnUpdate').addEventListener('click', async ()=>{
  if(!editingId) return; const user = auth.currentUser; if(!user || user.email !== ADMIN_EMAIL){ alert('Not allowed'); return; }
  $('#adminLoader').style.display='inline'; $('#btnUpdate').disabled=true;
  try{
    const title = $('#fTitle').value.trim(); const price = parseInt($('#fPrice').value||'0',10); const location = $('#fLocation').value.trim();
    const bhk = $('#fBHK').value; const area = $('#fArea').value.trim(); const phone = $('#fPhone').value.trim(); const whatsapp = $('#fWhatsapp').value.trim();
    const desc = $('#fDesc').value.trim(); const owner = $('#fOwner').value; const verified = $('#fVerified').checked; const featured = $('#fFeatured').checked;
    const files = $('#fImageFiles').files; const urlInput = $('#fImageUrl') ? $('#fImageUrl').value.trim() : '';
    if(!title || !price || !location){ alert('Title, Price, Location required'); return; }
    const snap = await db.ref('properties/'+editingId).once('value'); const existing = snap.val() || {};
    let imageUrls = existing.imageUrls || []; let imagePaths = existing.imagePaths || [];
    if(files.length){
      const newUrls=[]; const newPaths=[];
      for(let i=0;i<files.length;i++){ const f = files[i]; if(f.size > 5*1024*1024){ alert('Each image max 5MB'); throw new Error('file too large'); } const path = `properties/${Date.now()}_${Math.random().toString(36).slice(2,8)}_${f.name}`; const task = await storage.ref(path).put(f); const url = await task.ref.getDownloadURL(); newUrls.push(url); newPaths.push(path); }
      // delete old storage files
      for(const p of imagePaths){ if(p){ try{ await storage.ref(p).delete(); }catch(e){ console.warn('delete old failed',p,e.message); } } }
      imageUrls = newUrls; imagePaths = newPaths;
    } else if(urlInput){
      // use url input (replace existing storage files)
      for(const p of imagePaths){ if(p){ try{ await storage.ref(p).delete(); }catch(e){ console.warn('delete old failed',p,e.message); } } }
      imageUrls = [urlInput]; imagePaths = [''];
    }
    const payload = { title, price, location, bhk, area, phone, whatsapp, description:desc, owner, verified, featured, imageUrls, imagePaths, time: Date.now() };
    await db.ref('properties/'+editingId).update(payload); resetForm(); alert('Updated');
  }catch(err){ console.error(err); alert('Update error: '+(err.message||err)); }
  $('#adminLoader').style.display='none'; $('#btnUpdate').disabled=false;
});

/* ========== reset form ========== */
function resetForm(){
  editingId=null; $('#fTitle').value=''; $('#fPrice').value=''; $('#fLocation').value=''; $('#fBHK').value=''; $('#fArea').value=''; $('#fPhone').value=''; $('#fWhatsapp').value=''; $('#fDesc').value=''; $('#fImageFiles').value=''; $('#fOwner').value='owner'; $('#fVerified').checked=false; $('#fFeatured').checked=false; $('#btnAdd').style.display='inline-block'; $('#btnUpdate').style.display='none'; $('#btnCancelEdit').style.display='none';
}

/* ========== utils ========= */
function escapeHtml(s){ return (s||'').toString().replace(/[&<>"'`=\/]/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#96;','=':'&#61;'}[c])); }
</script>
</body>
</html>
