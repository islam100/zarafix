<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Image Upload Firebase</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage.js"></script>
</head>
<body>
  <h2>Upload Image to Firebase</h2>

  <input type="file" id="imageInput">
  <button onclick="uploadImage()">Upload</button>

  <p id="status"></p>
  <img id="preview" src="" width="200" style="display:none;">

  <script>
    // ðŸ”¹ Firebase Config (à¤…à¤ªà¤¨à¤¾ config à¤¯à¤¹à¤¾à¤ à¤¡à¤¾à¤²à¥‡à¤‚)
    const firebaseConfig = {
      apiKey: "AIzaSyD7ZqL-PVuFdd8rMVIyW7CgHQjPRGHD2h8",
      authDomain: "zara-fix-2e35a.firebaseapp.com",
      databaseURL: "https://zara-fix-2e35a-default-rtdb.firebaseio.com",
      projectId: "zara-fix-2e35a",
      storageBucket: "zara-fix-2e35a.appspot.com",
      messagingSenderId: "1005668231637",
      appId: "1:1005668231637:web:9b69cd43e3a8beef22368a"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const storage = firebase.storage();

    // Image Upload Function
    function uploadImage() {
      const file = document.getElementById("imageInput").files[0];
      if (!file) {
        alert("à¤•à¥ƒà¤ªà¤¯à¤¾ à¤à¤• à¤‡à¤®à¥‡à¤œ à¤šà¥à¤¨à¥‡à¤‚!");
        return;
      }

      document.getElementById("status").innerText = "Uploading...";

      // Firebase Storage Path
      const storageRef = storage.ref("images/" + file.name);

      // Upload File
      const uploadTask = storageRef.put(file);

      uploadTask.on(
        "state_changed",
        (snapshot) => {
          let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
          document.getElementById("status").innerText = "Uploading: " + progress.toFixed(2) + "%";
        },
        (error) => {
          alert("Error: " + error.message);
        },
        () => {
          uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
            // Save URL to Firebase Database
            const newImageRef = database.ref("uploads").push();
            newImageRef.set({
              imageUrl: downloadURL,
              fileName: file.name,
              uploadedAt: new Date().toString()
            });

            document.getElementById("status").innerText = "Upload Successful!";
            document.getElementById("preview").src = downloadURL;
            document.getElementById("preview").style.display = "block";
          });
        }
      );
    }
  </script>
</body>
</html>
