<!DOCTYPE html>
<html>
<head>
  <title>ZaraFix - Service Provider</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #eef2f3;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h2 { color: #333; }
    input, select {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #aaa;
      border-radius: 8px;
    }
    button {
      background: #28a745;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      margin-top: 10px;
      cursor: pointer;
      box-shadow: 2px 2px 10px #aaa;
    }
    button:hover { background: #218838; }
    #dashboardSection { display: none; }
    .card {
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 2px 2px 12px rgba(0,0,0,0.1);
      margin: 20px auto;
      width: 90%;
      max-width: 400px;
      text-align: left;
    }
  </style>
</head>
<body>

<h2>üß∞ ZaraFix - Service Provider Registration</h2>

<div id="formSection">
  <input id="name" placeholder="Full Name" />
  <input id="address" placeholder="Your Address" />
  <input id="shop" placeholder="Shop Name" />
  <input id="whatsapp" placeholder="WhatsApp Number" />
  <select id="category" required>
    <option value="">Select Category</option>
    <option>AC Mechanic</option>
    <option>Electrician</option>
    <option>Car Mechanic</option>
    <option>Plumber</option>
    <option>Painter</option>
    <option>Carpenter</option>
  </select>
  <br>
  <button onclick="submitForm()">Submit Registration</button>
</div>

<div id="dashboardSection">
  <h3>üéâ Welcome to Your Poster Dashboard</h3>
  <div class="card" id="posterInfo"></div>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
  // ‚úÖ Your Firebase Config
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);

  let currentUser = null;

  firebase.auth().onAuthStateChanged(user => {
    if (user) {
      currentUser = user;
      firebase.database().ref("posters/" + currentUser.uid).once("value").then(snapshot => {
        if (snapshot.exists()) {
          showDashboard(snapshot.val());
        } else {
          document.getElementById("formSection").style.display = "block";
        }
      });
    } else {
      window.location.href = "index.html"; // Not logged in
    }
  });

  function submitForm() {
    const data = {
      name: document.getElementById("name").value.trim(),
      address: document.getElementById("address").value.trim(),
      shop: document.getElementById("shop").value.trim(),
      whatsapp: document.getElementById("whatsapp").value.trim(),
      category: document.getElementById("category").value,
      wallet: 100,
      approved: false
    };

    if (!data.name || !data.address || !data.shop || !data.whatsapp || !data.category) {
      alert("‚ùå Please fill all fields.");
      return;
    }

    firebase.database().ref("posters/" + currentUser.uid).set(data).then(() => {
      showDashboard(data);
    });
  }

  function showDashboard(data) {
    document.getElementById("formSection").style.display = "none";
    document.getElementById("dashboardSection").style.display = "block";
    document.getElementById("posterInfo").innerHTML = `
      <b>Name:</b> ${data.name}<br>
      <b>Address:</b> ${data.address}<br>
      <b>Shop:</b> ${data.shop}<br>
      <b>WhatsApp:</b> ${data.whatsapp}<br>
      <b>Category:</b> ${data.category}<br>
      <b>Wallet:</b> ‚Çπ${data.wallet}<br>
      <b>Approved:</b> ${data.approved ? "‚úÖ Yes" : "‚ùå No"}
    `;
  }
</script>

</body>
</html>
