<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZaraFix – Sale Offers</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; padding:0; }
    header { background:#222; color:#fff; padding:15px; text-align:center; }
    nav { background:#444; padding:10px; display:flex; justify-content:center; gap:20px; }
    nav button { background:#fff; border:none; padding:8px 14px; cursor:pointer; border-radius:5px; }
    nav button:hover { background:#ddd; }

    .product-form, .dashboard { max-width:600px; margin:20px auto; background:#fff; padding:20px; border-radius:10px; }
    input, select, textarea { width:100%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:5px; }
    button { padding:10px 15px; background:#28a745; color:#fff; border:none; border-radius:5px; cursor:pointer; }
    button:hover { background:#218838; }
    .hidden { display:none; }

    /* Modal */
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
    .modal-content { background:#fff; padding:20px; border-radius:10px; max-width:500px; width:90%; position:relative; }
    .close-btn { position:absolute; top:10px; right:10px; background:red; color:#fff; border:none; border-radius:50%; width:30px; height:30px; cursor:pointer; }
  </style>
</head>
<body>

<header>
  <h1>ZaraFix – Sale Offers</h1>
</header>

<nav>
  <button onclick="showForm()">Add Product</button>
  <button onclick="showDashboard()">Dashboard</button>
</nav>

<!-- Product Form -->
<div class="product-form" id="productForm">
  <h2>Add Product</h2>
  <form id="offerForm">
    <input type="text" id="productName" placeholder="Product Name" required>
    <input type="tel" id="whatsappNumber" placeholder="WhatsApp Number (10 digit)" pattern="[0-9]{10}" required>
    <input type="number" id="productPrice" placeholder="Price" min="1" required>
    <input type="number" id="discount" placeholder="Discount (%)" min="0" max="90" required>
    <input type="file" id="productImage" accept="image/*" multiple required>
    <textarea id="description" placeholder="Product Description" required></textarea>
    <select id="category" required>
      <option value="">Select Category</option>
      <option>Electronics</option>
      <option>Fashion</option>
      <option>Food</option>
    </select>
    <button type="submit">Submit</button>
  </form>
</div>

<!-- Dashboard -->
<div class="dashboard hidden" id="dashboard">
  <h2>Admin Dashboard</h2>
  <div id="productList"></div>
</div>

<!-- Modal -->
<div class="modal" id="modal">
  <div class="modal-content">
    <button class="close-btn" onclick="closeModal()">×</button>
    <div id="modalBody"></div>
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>

<script>
  // Firebase Config (अपना वाला डालना)
  const firebaseConfig = {
  apiKey: "AIzaSyAa8htkfGK-4D3cIQVyxT3o_8WMvghkr-8",
  authDomain: "loot-lo-15328.firebaseapp.com",
  databaseURL: "https://loot-lo-15328-default-rtdb.firebaseio.com",
  projectId: "loot-lo-15328",
  storageBucket: "loot-lo-15328.appspot.com",
  messagingSenderId: "677769861892",
  appId: "1:677769861892:web:bb235cb8479aeee9b58e51"
};


  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Show Sections
  function showForm() {
    document.getElementById("productForm").classList.remove("hidden");
    document.getElementById("dashboard").classList.add("hidden");
  }

  function showDashboard() {
    document.getElementById("productForm").classList.add("hidden");
    document.getElementById("dashboard").classList.remove("hidden");
    loadProducts();
  }

  // Form Submit
  document.getElementById("offerForm").addEventListener("submit", async function(e){
    e.preventDefault();

    let name = document.getElementById("productName").value;
    let number = document.getElementById("whatsappNumber").value;
    let price = document.getElementById("productPrice").value;
    let discount = document.getElementById("discount").value;
    let desc = document.getElementById("description").value;
    let category = document.getElementById("category").value;

    if(number.length !== 10){
      alert("Please enter a valid 10-digit WhatsApp number.");
      return;
    }

    let product = {
      name, number, price, discount, desc, category,
      status: "Pending",
      created: Date.now()
    };

    firebase.database().ref("products").push(product);
    alert("Product submitted successfully!");
    this.reset();
  });

  // Load Products
  function loadProducts(){
    let list = document.getElementById("productList");
    list.innerHTML = "";
    firebase.database().ref("products").on("value", (snapshot)=>{
      snapshot.forEach((child)=>{
        let data = child.val();
        let div = document.createElement("div");
        div.innerHTML = `
          <h3>${data.name}</h3>
          <p>Price: ₹${data.price} | Discount: ${data.discount}%</p>
          <p>Status: ${data.status}</p>
          <button onclick="viewProduct('${child.key}')">View</button>
        `;
        list.appendChild(div);
      });
    });
  }

  // View Product
  function viewProduct(id){
    firebase.database().ref("products/"+id).once("value").then((snapshot)=>{
      let data = snapshot.val();
      document.getElementById("modalBody").innerHTML = `
        <h2>${data.name}</h2>
        <p>${data.desc}</p>
        <p>Category: ${data.category}</p>
        <p>WhatsApp: ${data.number}</p>
      `;
      document.getElementById("modal").style.display="flex";
    });
  }

  function closeModal(){
    document.getElementById("modal").style.display="none";
  }
</script>
</body>
</html>
