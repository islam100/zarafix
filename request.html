<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ZaraFix Service Request</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 15px;
    max-width: 500px;
    margin: auto;
  }
  button {
    cursor: pointer;
    padding: 12px 25px;
    border: none;
    border-radius: 8px;
    background: linear-gradient(145deg, #4caf50, #388e3c);
    color: white;
    font-size: 16px;
    box-shadow: 4px 4px 8px #2c6b29, -4px -4px 8px #67be45;
    transition: 0.3s;
  }
  button:hover {
    box-shadow: 0 0 15px #4caf50;
  }
  input, select, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    margin-bottom: 20px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
  }
  #logoutBtn {
    background: #d32f2f;
    box-shadow: 4px 4px 8px #8e2424, -4px -4px 8px #e33a3a;
  }
  #logoutBtn:hover {
    box-shadow: 0 0 15px #d32f2f;
  }
  #status {
    margin-bottom: 15px;
    font-weight: bold;
  }
</style>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>

<h1>ZaraFix Service Request</h1>

<div id="status">Loading...</div>

<button id="loginBtn">üîê Login with Google</button>
<button id="logoutBtn" style="display:none;">Logout</button>

<form id="requestForm" style="display:none;">
  <label for="name">Name *</label>
  <input id="name" type="text" required placeholder="Enter your name" />

  <label for="address">Address *</label>
  <textarea id="address" required placeholder="Enter your address"></textarea>

  <label for="whatsapp">WhatsApp Number *</label>
  <input id="whatsapp" type="tel" required placeholder="Enter WhatsApp number" pattern="[0-9]{10}" />

  <label for="category">Category *</label>
  <select id="category" required>
    <option value="">-- Select Service --</option>
    <option value="Plumber">Plumber</option>
    <option value="Electrician">Electrician</option>
    <option value="Carpenter">Carpenter</option>
    <option value="AC Repair">AC Repair</option>
    <option value="Refrigerator Repair">Refrigerator Repair</option>
    <option value="Washing Machine Repair">Washing Machine Repair</option>
    <option value="TV Repair">TV Repair</option>
    <option value="Computer Repair">Computer Repair</option>
    <option value="Mobile Repair">Mobile Repair</option>
    <option value="RO / Water Purifier Technician">RO / Water Purifier Technician</option>
    <option value="Gas Stove Repair">Gas Stove Repair</option>
    <option value="CCTV Installation">CCTV Installation</option>
    <option value="Inverter / Battery Technician">Inverter / Battery Technician</option>
    <option value="Printer / Scanner Repair">Printer / Scanner Repair</option>
    <option value="Welder / Fabrication">Welder / Fabrication</option>
    <option value="Home Cleaning">Home Cleaning</option>
    <option value="Pest Control">Pest Control</option>
    <option value="Water Tank Cleaning">Water Tank Cleaning</option>
    <option value="Painter">Painter</option>
    <option value="Interior Designer">Interior Designer</option>
    <option value="False Ceiling Work">False Ceiling Work</option>
    <option value="Car Mechanic">Car Mechanic</option>
    <option value="Bike Mechanic">Bike Mechanic</option>
    <option value="Auto Electrician">Auto Electrician</option>
    <option value="Car Wash Service">Car Wash Service</option>
    <option value="Tyre Puncture Service">Tyre Puncture Service</option>
    <option value="Beautician">Beautician</option>
    <option value="Makeup Artist">Makeup Artist</option>
    <option value="Massage Service">Massage Service</option>
    <option value="Hairdresser / Barber">Hairdresser / Barber</option>
    <option value="Tailor / Boutique">Tailor / Boutique</option>
    <option value="Fitness Trainer">Fitness Trainer</option>
    <option value="Yoga Instructor">Yoga Instructor</option>
    <option value="Tuition / Home Tutor">Tuition / Home Tutor</option>
    <option value="Dance / Music Teacher">Dance / Music Teacher</option>
    <option value="Drawing Teacher">Drawing Teacher</option>
    <option value="Cook / Chef">Cook / Chef</option>
    <option value="Maid / House Help">Maid / House Help</option>
    <option value="Baby Sitter / Nanny">Baby Sitter / Nanny</option>
    <option value="Gardener / Mali">Gardener / Mali</option>
    <option value="Elderly Caregiver">Elderly Caregiver</option>
    <option value="Event Planner">Event Planner</option>
    <option value="Photographer">Photographer</option>
    <option value="DJ / Music System">DJ / Music System</option>
    <option value="Tent & Decoration">Tent & Decoration</option>
    <option value="Catering Service">Catering Service</option>
    <option value="Driving Instructor">Driving Instructor</option>
    <option value="Driving Service">Driving Service</option>
    <option value="Courier Service">Courier Service</option>
    <option value="Laundry / Dry Clean">Laundry / Dry Clean</option>
    <option value="Delivery Boy">Delivery Boy</option>
    <option value="Watch Repair">Watch Repair</option>
    <option value="Key Maker / Lock Repair">Key Maker / Lock Repair</option>
    <option value="Borewell Service">Borewell Service</option>
    <option value="Water Motor Repair">Water Motor Repair</option>
    <option value="Solar Panel Repair">Solar Panel Repair</option>
    <option value="Ceiling / Exhaust Fan Repair">Ceiling / Exhaust Fan Repair</option>
    <option value="Microwave Repair">Microwave Repair</option>
    <option value="UPS / Stabilizer Repair">UPS / Stabilizer Repair</option>
    <option value="Chimney Cleaning / Repair">Chimney Cleaning / Repair</option>
    <option value="Tiles / Marble Work">Tiles / Marble Work</option>
    <option value="Aluminium / Glass Work">Aluminium / Glass Work</option>
    <option value="Plaster / POP Work">Plaster / POP Work</option>
    <option value="Security Guard Service">Security Guard Service</option>
    <option value="Puja / Pandit Service">Puja / Pandit Service</option>
    <option value="Matrimonial / Matchmaking Service">Matrimonial / Matchmaking Service</option>
    <option value="House Agent / Property Dealer">House Agent / Property Dealer</option>
    <option value="Truck Mechanic">Truck Mechanic</option>
    <option value="Bus Mechanic">Bus Mechanic</option>
    <option value="E-Rickshaw Mechanic">E-Rickshaw Mechanic</option>
    <option value="Tractor Mechanic">Tractor Mechanic</option>
    <option value="Diesel Engine Mechanic">Diesel Engine Mechanic</option>
    <option value="Generator Mechanic">Generator Mechanic</option>
    <option value="Hydraulic Mechanic">Hydraulic Mechanic</option>
    <option value="Scooter Mechanic">Scooter Mechanic</option>
    <option value="JCB / Heavy Machine Mechanic">JCB / Heavy Machine Mechanic</option>
  </select>

  <label for="problem">Problem Description *</label>
  <textarea id="problem" required placeholder="Describe your problem"></textarea>

  <button type="submit">Submit Request</button>
</form>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

<script>
  // Firebase Config
  const firebaseConfig = {
    apiKey: "AIzaSyCH17_8W_UPmPt4KqpCaV7BpN6KsA4a67E",
    authDomain: "zara-fix.firebaseapp.com",
    databaseURL: "https://zara-fix-default-rtdb.firebaseio.com",
    projectId: "zara-fix",
    storageBucket: "zara-fix.appspot.com",
    messagingSenderId: "476473209200",
    appId: "1:476473209200:web:9f6efe6c32fd4248949fb5"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.database();

  // DOM Elements
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const status = document.getElementById("status");
  const requestForm = document.getElementById("requestForm");

  // Login function
  loginBtn.onclick = () => {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider).catch(error => {
      status.textContent = "Login failed: " + error.message;
    });
  };

  // Logout function
  logoutBtn.onclick = () => {
    auth.signOut();
  };

  // Auth state listener
  auth.onAuthStateChanged(user => {
    if(user) {
      status.textContent = "Welcome, " + user.displayName;
      loginBtn.style.display = "none";
      logoutBtn.style.display = "inline-block";
      requestForm.style.display = "block";
    } else {
      status.textContent = "Please login to submit a service request.";
      loginBtn.style.display = "inline-block";
      logoutBtn.style.display = "none";
      requestForm.style.display = "none";
    }
  });

  // Submit form handler
  requestForm.onsubmit = (e) => {
    e.preventDefault();
    const user = auth.currentUser;
    if(!user) {
      alert("Please login first.");
      return;
    }
    const name = document.getElementById("name").value.trim();
    const address = document.getElementById("address").value.trim();
    const whatsapp = document.getElementById("whatsapp").value.trim();
    const category = document.getElementById("category").value;
    const problem = document.getElementById("problem").value.trim();

    if(!name || !address || !whatsapp || !category || !problem) {
      alert("Please fill all fields.");
      return;
    }

    // Push request to Firebase Realtime Database
    const newRequestKey = db.ref().child('requests').push().key;
    const requestData = {
      userId: user.uid,
      name,
      address,
      whatsapp,
      category,
      problem,
      status: "pending",
      timestamp: Date.now()
    };

    const updates = {};
    updates['/requests/' + user.uid + '/' + newRequestKey] = requestData;

    db.ref().update(updates).then(() => {
      alert("Request submitted successfully!");
      requestForm.reset();
    }).catch(err => {
      alert("Error submitting request: " + err.message);
    });
  };
</script>

</body>
</html>
