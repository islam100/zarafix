<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zara Property</title>
</head>
<body>
  <h2>‡§®‡§Ø‡§æ ‡§™‡•ã‡§∏‡•ç‡§ü ‡§°‡§æ‡§≤‡•á‡§Ç</h2>
  <input type="text" id="title" placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§≤‡§ø‡§ñ‡•á‡§Ç"><br><br>
  <input type="text" id="desc" placeholder="‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≤‡§ø‡§ñ‡•á‡§Ç"><br><br>
  <button onclick="addPost()">Post ‡§ú‡•ã‡§°‡§º‡•á‡§Ç</button>

  <h2>‡§™‡•ã‡§∏‡•ç‡§ü ‡§≤‡§ø‡§∏‡•ç‡§ü</h2>
  <ul id="postList"></ul>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    // üîπ ‡§Ü‡§™‡§ï‡§æ Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyDTj2n1yhr1sFmuyBZ-jUwOmx1YqAN5QjA",
      authDomain: "property-20d6d.firebaseapp.com",
      databaseURL: "https://property-20d6d-default-rtdb.firebaseio.com",
      projectId: "property-20d6d",
      storageBucket: "property-20d6d.appspot.com",
      messagingSenderId: "916859697394",
      appId: "1:916859697394:web:2a8f9ad2d62f8306dcb86b"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // üîπ Add post
    function addPost() {
      const title = document.getElementById("title").value;
      const desc = document.getElementById("desc").value;

      if(title.trim() === "" || desc.trim() === "") {
        alert("‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§´‡§º‡•Ä‡§≤‡•ç‡§° ‡§≠‡§∞‡•á‡§Ç");
        return;
      }

      const newPostKey = db.ref().child("posts").push().key;
      db.ref("posts/" + newPostKey).set({
        title: title,
        desc: desc,
        approved: true,   // ‡§Ö‡§≠‡•Ä default approved ‡§§‡§æ‡§ï‡§ø ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§¶‡§ø‡§ñ‡•á
        timestamp: Date.now()
      });

      document.getElementById("title").value = "";
      document.getElementById("desc").value = "";
    }

    // üîπ Fetch posts
    db.ref("posts").on("value", (snapshot) => {
      const postList = document.getElementById("postList");
      postList.innerHTML = "";
      snapshot.forEach((childSnapshot) => {
        const post = childSnapshot.val();
        if(post.approved){
          const li = document.createElement("li");
          li.textContent = post.title + " - " + post.desc;
          postList.appendChild(li);
        }
      });
    });
  </script>
</body>
</html>
