<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZaraFix - Admin Panel</title>
  <style>
    body { margin: 0; font-family: 'Segoe UI', sans-serif; background: #f0f2f5; color: #333; }
    header { background: linear-gradient(90deg,#007bff,#0056b3); color: #fff; padding: 18px; text-align: center; font-size: 24px; font-weight: bold; box-shadow:0 2px 5px rgba(0,0,0,0.2);}
    nav { background: #222; display: flex; flex-wrap: wrap; justify-content: center; }
    nav a { color: #fff; padding: 12px 16px; text-decoration: none; font-size: 15px; transition:0.3s;}
    nav a:hover { background: #007bff; border-radius:5px; }
    .container { max-width: 900px; margin: 20px auto; padding: 20px; background: #fff; border-radius: 12px; box-shadow: 0px 5px 15px rgba(0,0,0,0.15); }
    h2 { color: #007bff; margin-top: 0; }
    input, select, textarea, button { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; border-radius: 8px; font-size: 15px; }
    button { background: #007bff; color: #fff; cursor: pointer; font-weight: bold; border: none; box-shadow:0 3px 6px rgba(0,0,0,0.2); transition:0.3s;}
    button:hover { background: #0056b3; transform:scale(1.05);}
    .card { background: #fafafa; padding: 15px; margin-bottom: 15px; border-radius: 10px; border: 1px solid #ddd; box-shadow:0 2px 6px rgba(0,0,0,0.1);}
    .footer { background: #222; color: #fff; padding: 15px; text-align: center; margin-top: 40px; font-size: 14px; }
    .status-pending { color: orange; font-weight:bold; }
    .status-approved { color: green; font-weight:bold; }
    .status-rejected { color: red; font-weight:bold; }
    @media (max-width: 600px) { header { font-size: 20px; } nav a { font-size: 13px; padding: 10px; } .container { margin: 10px; padding: 15px; } }
  </style>
</head>
<body>

  <header>ZaraFix Admin Panel</header>

  <nav>
    <a href="#">Services</a>
    <a href="#">Property</a>
    <a href="#">Ambulance</a>
    <a href="#">All Services</a>
    <a href="#">Provider</a>
    <a href="#">About</a>
    <a href="#">Contact</a>
    <a href="#">Privacy Policy</a>
  </nav>

  <!-- Login -->
  <div class="container" id="loginSection">
    <h2>üîë Login with Google</h2>
    <button id="googleLogin">Google ‡§∏‡•á Login ‡§ï‡§∞‡•á‡§Ç</button>
  </div>

  <!-- User Info -->
  <div class="container" id="userSection" style="display:none;">
    <h2>üë§ Welcome, <span id="userName"></span></h2>
    <p>Email: <span id="userEmail"></span></p>
    <button onclick="logout()">Logout</button>
  </div>

  <!-- Product Add -->
  <div class="container" id="addProduct" style="display:none;">
    <h2>üÜï ‡§®‡§Ø‡§æ Product Add ‡§ï‡§∞‡•á‡§Ç</h2>
    <form id="addForm">
      <input type="text" id="pName" placeholder="Product Name" required>
      <select id="pCategory">
        <option value="General">‡§∏‡§≠‡•Ä Categories</option>
        <option value="Electronics">Electronics</option>
        <option value="Property">Property</option>
        <option value="Repair">Repair Service</option>
      </select>
      <textarea id="pDesc" placeholder="Description"></textarea>
      <button type="submit">Submit</button>
    </form>
  </div>

  <!-- Admin Panel -->
  <div class="container" id="adminPanel" style="display:none;">
    <h2>‚öôÔ∏è Admin Panel</h2>
    <p>Approve / Reject Products ‡§Ø‡§π‡§æ‡§Å ‡§∏‡•á ‡§ï‡§∞‡•á‡§Ç:</p>
    <div id="productList"></div>
  </div>

  <div class="footer">¬© 2025 ZaraFix | All Rights Reserved</div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

  <script>
    // üîπ Firebase Config (same as ‡§Ü‡§™‡§ï‡•á project ‡§ï‡§æ)
    const firebaseConfig = {
      apiKey: "AIzaSyDTj2n1yhr1sFmuyBZ-jUwOmx1YqAN5QjA",
      authDomain: "property-20d6d.firebaseapp.com",
      databaseURL: "https://property-20d6d-default-rtdb.firebaseio.com",
      projectId: "property-20d6d",
      storageBucket: "property-20d6d.appspot.com",
      messagingSenderId: "352465373909",
      appId: "1:352465373909:web:7f6722e4df94b0e09c9ee3"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();
    const provider = new firebase.auth.GoogleAuthProvider();

    // üîπ Login with Google
    document.getElementById("googleLogin").addEventListener("click", () => {
      auth.signInWithPopup(provider).then((result) => {
        const user = result.user;
        showUser(user);
      }).catch((err) => alert("Login Failed: " + err.message));
    });

    // üîπ Logout
    function logout() {
      auth.signOut().then(() => {
        document.getElementById("loginSection").style.display = "block";
        document.getElementById("userSection").style.display = "none";
        document.getElementById("addProduct").style.display = "none";
        document.getElementById("adminPanel").style.display = "none";
      });
    }

    // üîπ Show User
    function showUser(user) {
      document.getElementById("loginSection").style.display = "none";
      document.getElementById("userSection").style.display = "block";
      document.getElementById("addProduct").style.display = "block";
      document.getElementById("adminPanel").style.display = "block";
      document.getElementById("userName").innerText = user.displayName;
      document.getElementById("userEmail").innerText = user.email;
      loadProducts();
    }

    // üîπ Add Product
    document.getElementById("addForm").addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("pName").value;
      const cat = document.getElementById("pCategory").value;
      const desc = document.getElementById("pDesc").value;
      const newRef = db.ref("products").push();
      newRef.set({
        name: name,
        category: cat,
        description: desc,
        status: "pending",
        user: auth.currentUser.email,
        timestamp: Date.now()
      });
      alert("‚úÖ Product Added!");
      document.getElementById("addForm").reset();
    });

    // üîπ Load Products
    function loadProducts() {
      const list = document.getElementById("productList");
      db.ref("products").on("value", (snapshot) => {
        list.innerHTML = "";
        snapshot.forEach((child) => {
          const p = child.val();
          const div = document.createElement("div");
          div.className = "card";
          div.innerHTML = `
            <h3>${p.name}</h3>
            <p>Category: ${p.category}</p>
            <p>${p.description || ""}</p>
            <p>Added By: ${p.user || "Unknown"}</p>
            <p>Status: <span class="status-${p.status}">${p.status}</span></p>
            <button onclick="updateStatus('${child.key}','approved')">Approve</button>
            <button onclick="updateStatus('${child.key}','rejected')">Reject</button>
          `;
          list.appendChild(div);
        });
      });
    }

    // üîπ Update Status
    function updateStatus(id, status) {
      db.ref("products/" + id + "/status").set(status);
      alert("‚úÖ Status updated to " + status);
    }
  </script>
</body>
</html>
