<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Real Estate Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#f5f5f5; }
    header { background:linear-gradient(135deg,#2196F3,#21CBF3); color:white;
             display:flex; align-items:center; justify-content:space-between;
             padding:10px 20px; box-shadow:0 3px 8px rgba(0,0,0,0.3); flex-wrap:wrap; }
    header h1 { margin:0; font-size:20px; text-shadow:1px 1px 3px #000; }
    button { cursor:pointer; padding:6px 10px; border:none; border-radius:6px;
             box-shadow:0 3px 5px rgba(0,0,0,0.25); font-weight:bold; margin:3px; font-size:13px; }
    .btn3d { background:#4CAF50; color:#fff; }
    .btn3d:disabled { background:#999; box-shadow:none; }
    .logoutBtn { background:#E53935; color:#fff; }
    .newPostBtn { background:#FF9800; color:#fff; margin-left:10px; }
    .waBtn { background:#25D366; color:#fff; }

    /* Search Bar */
    .searchBar {
      margin: 70px 10px 10px;
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    .searchBar input, .searchBar select {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
      min-width: 180px;
    }

    /* Grid */
    .grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
            gap:12px; padding:12px; }
    .card { background:#fff; border-radius:10px; box-shadow:0 3px 5px rgba(0,0,0,0.2);
            padding:10px; position:relative; transition:transform .2s; cursor:pointer;
            font-size:13px; border:2px solid red; }
    .card:hover { transform:scale(1.02); }
    .card img { width:100%; height:150px; object-fit:cover; border-radius:6px; }
    .card h3 { margin:6px 0 3px; font-size:15px; }
    .card p { margin:1px 0; font-size:13px; }

    .pending { background:#ffcdd2; border:2px solid #f44336; animation:blinkBorder 1s infinite; }
    @keyframes blinkBorder { 50% { border-color:#b71c1c; } }
  </style>
</head>
<body>
<header>
  <h1>üè† Real Estate Portal</h1>
  <div>
    <a href="index.html">
      <button style="background-color:blue; color:white;">üè° Home</button>
    </a>
    <button id="loginBtn" style="background-color:#4ade80; color:white;">üîë Login</button>
    <button id="logoutBtn" style="display:none; background-color:#ef4444; color:white;">Logout</button>
    <button id="newPostBtn" style="display:none; background-color:#2563eb; color:white;">+ New Post</button>
  </div>
</header>

<!-- üîç Search Bar -->
<div class="searchBar">
  <input type="text" id="searchInput" placeholder="Search by type, address, BHK...">
  <select id="categoryFilter">
    <option value="">All Posters</option>
    <option value="Builder">Builder</option>
    <option value="Owner">Owner</option>
    <option value="Agent">Agent</option>
  </select>
</div>

<main>
  <div class="grid" id="posts"></div>
</main>

<!-- Modal code (same as your previous) ... -->

<script>
/* Firebase Config */
const firebaseConfig = {
  apiKey: "AIzaSyDTj2n1yhr1sFmuyBZ-jUwOmx1YqAN5QjA",
  authDomain: "property-20d6d.firebaseapp.com",
  databaseURL: "https://property-20d6d-default-rtdb.firebaseio.com",
  projectId: "property-20d6d",
  storageBucket: "property-20d6d.appspot.com",
  messagingSenderId: "916859697394",
  appId: "1:916859697394:web:2a8f9ad2d62f8306dcb86b"
};
firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();
const db=firebase.database();

const postsDiv=document.getElementById('posts');
const searchInput=document.getElementById('searchInput');
const categoryFilter=document.getElementById('categoryFilter');

let allPosts=[]; // ‡§∏‡§≠‡•Ä ‡§™‡•ã‡§∏‡•ç‡§ü ‡§™‡§π‡§≤‡•á ‡§≤‡•ã‡§° ‡§π‡•ã‡§Ç‡§ó‡•á

function renderPosts(){
  const keyword=searchInput.value.toLowerCase();
  const category=categoryFilter.value;
  postsDiv.innerHTML="";

  allPosts.forEach(p=>{
    // filter
    if(category && p.posterType!==category) return;
    if(keyword && !(p.propertyType.toLowerCase().includes(keyword) ||
                    p.address.toLowerCase().includes(keyword) ||
                    p.bhk.toLowerCase().includes(keyword) ||
                    p.posterName.toLowerCase().includes(keyword))) return;

    // card create
    const card=document.createElement("div");
    card.className="card";
    if(p.images && p.images.length){
      const img=document.createElement("img"); img.src=p.images[0]; card.appendChild(img);
    }
    card.innerHTML+=`
      <h3>${p.propertyType} - ${p.bhk}</h3>
      <p>‚Çπ${p.price}</p>
      <p>${p.address}</p>
      <p>üìû ${p.posterPhone}</p>
      <p>üë§ ${p.posterName} (${p.posterType})</p>
    `;
    postsDiv.appendChild(card);
  });
}

// Load posts
function loadPosts(){
  db.ref("posts").orderByChild("created").on("value",snap=>{
    allPosts=[];
    snap.forEach(ch=>allPosts.push({...ch.val(), id:ch.key}));
    allPosts.reverse();
    renderPosts();
  });
}
loadPosts();

// Search listeners
searchInput.addEventListener("input",renderPosts);
categoryFilter.addEventListener("change",renderPosts);
</script>
</body>
</html>
