<div id="cardsContainer"></div>

<script>
  const currentAdminUid = "wjbEIAEF5jWgJKb2LlfWoIv4EqO2"; // à¤†à¤ªà¤•à¥€ UID

  const requests = {
    "user123": {
      "request1": {
        "name": "Sameer Islam Khn",
        "category": "Electrician",
        "address": "vasai palghar maharashtra 401203",
        "timestamp": 1753219796000,
        "status": "approved",
        "whatsapp": "9112170192",
        "acceptedBy": {
          "wjbEIAEF5jWgJKb2LlfWoIv4EqO2": {
            "name": "Zara Poster",
            "whatsapp": "9876543210",
            "shop": "FixIt Shop",
            "timestamp": 1753220000000
          }
        }
      }
    }
  };

  const container = document.getElementById('cardsContainer');

  Object.keys(requests).forEach(userId => {
    Object.entries(requests[userId]).forEach(([reqId, req]) => {
      const isApproved = req.status === 'approved';
      const acceptedData = req.acceptedBy?.[currentAdminUid] || {};

      const card = document.createElement('div');
      card.style = `
        background: #fff;
        padding: 10px;
        margin: 10px;
        border-radius: 12px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        font-family: sans-serif;
        max-width: 300px;
      `;

      const shop = isApproved ? (acceptedData.shop || 'N/A') : 'N/A';
      const contact = isApproved ? (acceptedData.whatsapp || 'N/A') : 'N/A';

      card.innerHTML = `
        <p>ğŸ§‘â€ğŸ”§ <b>Name:</b> ${req.name}</p>
        <p>ğŸ”§ <b>Category:</b> ${req.category}</p>
        <p>ğŸ“ <b>Address:</b> ${req.address}</p>
        <p>ğŸª <b>Shop:</b> ${shop}</p>
        <p>ğŸ“± <b>Contact:</b> ${contact}</p>
        <p>ğŸ’¼ <b>Status:</b> ${req.status}</p>
        <div id="actionBtns">
          ${isApproved
            ? `<a href="https://wa.me/${contact}" target="_blank" style="color: green;">WhatsApp</a>`
            : `<button onclick="approveRequest('${userId}', '${reqId}')">Approve</button>`}
        </div>
      `;

      container.appendChild(card);
    });
  });

  function approveRequest(userId, reqId) {
    // ğŸ”§ Replace this with Firebase update logic
    alert(`Approving request ${reqId} of ${userId}`);
  }
</script>
